go run main.go
I0729 12:20:28.792833   15487 controller_config.go:63] CLUSTER_VPC_ID passed as input: vpc-0d3c74aaa93e650b1
I0729 12:20:28.792872   15487 controller_config.go:75] REGION passed as input: us-west-2
I0729 12:20:28.792877   15487 controller_config.go:87] AWS_ACCOUNT_ID passed as input: 403577698595
I0729 12:20:28.792882   15487 controller_config.go:98] Logging Level: debug
I0729 12:20:28.792887   15487 controller_config.go:103] No CLUSTER_LOCAL_GATEWAY
I0729 12:20:28.792891   15487 controller_config.go:110] TARGET_GROUP_NAME_LEN_MODE 
I0729 12:20:28.793058   15487 vpclattice.go:40] Lattice Service EndPoint: https://vpc-lattice.us-west-2.amazonaws.com
2023-07-29T12:20:28Z	INFO	controller-runtime.metrics	Metrics server is starting to listen	{"addr": ":8080"}
I0729 12:20:28.851624   15487 httproute_controller.go:369] DNSEndpoint CRD is not supported
2023-07-29T12:20:28Z	INFO	setup	starting manager
I0729 12:20:28.851957   15487 introspect.go:36] Starting LatticeDataStore serve Introspection
I0729 12:20:28.852037   15487 introspect.go:91] Serving introspection endpoints on 0.0.0.0:61680
2023-07-29T12:20:28Z	INFO	Starting server	{"kind": "health probe", "addr": "[::]:8081"}
2023-07-29T12:20:28Z	INFO	Starting server	{"path": "/metrics", "kind": "metrics", "addr": "[::]:8080"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "source": "kind source: *v1.Pod"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass", "source": "kind source: *v1beta1.GatewayClass"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "source": "kind source: *v1beta1.HTTPRoute"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "source": "kind source: *v1beta1.Gateway"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "source": "kind source: *v1.Service"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "serviceimport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceImport", "source": "kind source: *v1alpha1.ServiceImport"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "source": "kind source: *v1beta1.Gateway"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "source": "kind source: *v1.Service"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "source": "kind source: *v1alpha1.ServiceImport"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "source": "kind source: *v1beta1.GatewayClass"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport", "source": "kind source: *v1alpha1.ServiceExport"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "serviceimport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceImport"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "source": "kind source: *v1.Endpoints"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport", "source": "kind source: *v1.Service"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "source": "kind source: *v1beta1.HTTPRoute"}
2023-07-29T12:20:28Z	INFO	Starting EventSource	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "source": "kind source: *v1alpha1.ServiceExport"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "service", "controllerGroup": "", "controllerKind": "Service"}
2023-07-29T12:20:28Z	INFO	Starting Controller	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport"}
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "worker count": 1}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-ntcm4","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-ntcm4", "reconcileID": "06f19d94-5e16-482d-a905-074d66c23c50"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2hq62","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2hq62", "reconcileID": "39deb603-f658-4c8f-b612-2e0ae66a2735"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"coredns-67f8f59c6c-z4bjx","namespace":"kube-system"}, "namespace": "kube-system", "name": "coredns-67f8f59c6c-z4bjx", "reconcileID": "6484e27a-939b-42c4-aacf-716a9d63958b"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"kube-proxy-msvvx","namespace":"kube-system"}, "namespace": "kube-system", "name": "kube-proxy-msvvx", "reconcileID": "1f0bcd68-f72a-4779-95af-28b499660a12"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"aws-node-hg5dj","namespace":"kube-system"}, "namespace": "kube-system", "name": "aws-node-hg5dj", "reconcileID": "a11a2046-8139-4fa3-b700-8e2de7423323"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"coredns-67f8f59c6c-2f5x9","namespace":"kube-system"}, "namespace": "kube-system", "name": "coredns-67f8f59c6c-2f5x9", "reconcileID": "7b0ecfb7-0d52-44af-b4a1-7f9ff181f240"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"aws-node-4xbx8","namespace":"kube-system"}, "namespace": "kube-system", "name": "aws-node-4xbx8", "reconcileID": "657e4d88-35a7-4a36-bee6-3f1b0f58980b"}
2023-07-29T12:20:28Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"kube-proxy-7pxgd","namespace":"kube-system"}, "namespace": "kube-system", "name": "kube-proxy-7pxgd", "reconcileID": "2616a592-6c6d-41c8-8f78-2821eb9cc207"}
I0729 12:20:28.953268   15487 gateway.go:38] Gateway Create and Spec is {amazon-vpc-lattice [{http <nil> 80 HTTP <nil> 0xc0003d2500} {https <nil> 443 HTTPS <nil> 0xc0003d2520}] []}
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass", "worker count": 1}
I0729 12:20:28.953346   15487 gateway.go:110] Trigger HTTPRoute from Gateway event , httpRoute gargo-20-exv6tcuxxl
2023-07-29T12:20:28Z	INFO	ReconcileLoop	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass", "GatewayClass": {"name":"amazon-vpc-lattice"}, "namespace": "", "name": "amazon-vpc-lattice", "reconcileID": "64c5838e-375f-4b38-9dc8-f61ce8fa1698"}
2023-07-29T12:20:28Z	INFO	Creating LatticeGatewayClass 	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass", "GatewayClass": {"name":"amazon-vpc-lattice"}, "namespace": "", "name": "amazon-vpc-lattice", "reconcileID": "64c5838e-375f-4b38-9dc8-f61ce8fa1698"}
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "worker count": 1}
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "serviceimport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceImport", "worker count": 1}
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "worker count": 1}
I0729 12:20:28.953448   15487 gatewayclass.go:55] Found matching gateway, test-gateway
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "worker count": 1}
I0729 12:20:28.953467   15487 endpoints.go:29] Event: endpoint create
2023-07-29T12:20:28Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "1c9b929d-d57d-4243-907a-071e793c41c6"}
I0729 12:20:28.953409   15487 service.go:119] Event: enqueueImpactedHTTPRoute: &Service{ObjectMeta:{kubernetes  default  b11a970d-8b07-47f2-8616-aefe8d53487d 189 0 2023-07-04 05:28:24 +0000 UTC <nil> <nil> map[component:apiserver provider:kubernetes] map[] [] [] [{kube-apiserver Update v1 2023-07-04 05:28:24 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:component":{},"f:provider":{}}},"f:spec":{"f:clusterIP":{},"f:internalTrafficPolicy":{},"f:ipFamilyPolicy":{},"f:ports":{".":{},"k:{\"port\":443,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:sessionAffinity":{},"f:type":{}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:https,Protocol:TCP,Port:443,TargetPort:{0 443 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{},ClusterIP:10.100.0.1,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.0.1],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"kubernetes","namespace":"default"}, "namespace": "default", "name": "kubernetes", "reconcileID": "9f84f2b1-4184-4a98-bcdb-f34e34c307ac"}
I0729 12:20:28.953557   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
2023-07-29T12:20:28Z	INFO	Starting workers	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport", "worker count": 1}
2023-07-29T12:20:28Z	INFO	reconcile gateway resource	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "1c9b929d-d57d-4243-907a-071e793c41c6"}
I0729 12:20:28.953565   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:20:28.953470   15487 httproute.go:31] HTTPRoute create
2023-07-29T12:20:28Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "f9dab7db-40ee-4e74-aa70-843c5a41d8d3"}
I0729 12:20:28.953515   15487 endpoints.go:56] Event: enqueueImpactedService [&Endpoints{ObjectMeta:{kube-dns  kube-system  8a327af1-c6e1-4b89-ac44-060fef016f56 1378 0 2023-07-04 05:28:32 +0000 UTC <nil> <nil> map[eks.amazonaws.com/component:kube-dns k8s-app:kube-dns kubernetes.io/cluster-service:true kubernetes.io/name:CoreDNS] map[] [] [] [{kube-controller-manager Update v1 2023-07-04 05:35:33 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:eks.amazonaws.com/component":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.41.201,TargetRef:&ObjectReference{Kind:Pod,Namespace:kube-system,Name:coredns-67f8f59c6c-z4bjx,UID:341c865a-c4c1-4f99-a111-ca937a0ca892,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.110,TargetRef:&ObjectReference{Kind:Pod,Namespace:kube-system,Name:coredns-67f8f59c6c-2f5x9,UID:ffb8a156-bd80-4f9f-9fa1-12af08f31864,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:dns-tcp,Port:53,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:dns,Port:53,Protocol:UDP,AppProtocol:nil,},},},},}]
I0729 12:20:28.953798   15487 httproute.go:65] enqueueImpactedService [&{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5020592 1 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc0009a6500 0xc0009a6510 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc0009a6580 [] [] <nil>}] [] [{{{0xc0009a6520 0xc0009a6530 crown-19-xp02eti5zc 0xc0009a6540 0xc0005cb70c} 0xc0005cb714} []} {{{0xc0009a6550 0xc0009a6560 crown-19-xp02eti5zc 0xc0009a6570 0xc0005cb72c} 0xc0005cb734} []}]}]} {{[]}}}]
I0729 12:20:28.953508   15487 service.go:32] Event: service create
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"kube-dns","namespace":"kube-system"}, "namespace": "kube-system", "name": "kube-dns", "reconcileID": "e39c0675-8feb-4971-b673-fb395025750f"}
I0729 12:20:28.953953   15487 httproute.go:81] enqueueRequestsForHTTPRouteEvent for svc[non-default/crown-19-xp02eti5zc]
I0729 12:20:28.953989   15487 httproute.go:81] enqueueRequestsForHTTPRouteEvent for svc[non-default/crown-19-xp02eti5zc]
I0729 12:20:28.953926   15487 gateway_controller.go:368] Before update, the snapshot of listeners  [{http [{0xc0007ed400 HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc0007ed410 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}] 
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "2df9d3ac-d748-48ff-93a0-4f573442be3b"}
I0729 12:20:28.953948   15487 service.go:53] Event: enqueueImpactedService: &Service{ObjectMeta:{kubernetes  default  b11a970d-8b07-47f2-8616-aefe8d53487d 189 0 2023-07-04 05:28:24 +0000 UTC <nil> <nil> map[component:apiserver provider:kubernetes] map[] [] [] [{kube-apiserver Update v1 2023-07-04 05:28:24 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:component":{},"f:provider":{}}},"f:spec":{"f:clusterIP":{},"f:internalTrafficPolicy":{},"f:ipFamilyPolicy":{},"f:ports":{".":{},"k:{\"port\":443,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:sessionAffinity":{},"f:type":{}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:https,Protocol:TCP,Port:443,TargetPort:{0 443 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{},ClusterIP:10.100.0.1,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.0.1],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:20:28.954075   15487 gateway_controller.go:491] After update, the snapshot of listener status [{http [{<nil> HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]
I0729 12:20:28.954083   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc0007ed4a0 0xc0007ed4b0 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc0007ed4c0 [] [] <nil>}] [] [{{{0xc0007ed4f0 0xc0007ed500 crown-19-xp02eti5zc 0xc0007ed510 0xc000705ea0} 0xc000705ea4} []} {{{0xc0007ed520 0xc0007ed530 crown-19-xp02eti5zc 0xc0007ed540 0xc000705ea8} 0xc000705eac} []}]}]}
I0729 12:20:28.954093   15487 service.go:73] Event: enqueueImpactedServiceExport: &Service{ObjectMeta:{kubernetes  default  b11a970d-8b07-47f2-8616-aefe8d53487d 189 0 2023-07-04 05:28:24 +0000 UTC <nil> <nil> map[component:apiserver provider:kubernetes] map[] [] [] [{kube-apiserver Update v1 2023-07-04 05:28:24 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:component":{},"f:provider":{}}},"f:spec":{"f:clusterIP":{},"f:internalTrafficPolicy":{},"f:ipFamilyPolicy":{},"f:ports":{".":{},"k:{\"port\":443,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:sessionAffinity":{},"f:type":{}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:https,Protocol:TCP,Port:443,TargetPort:{0 443 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{},ClusterIP:10.100.0.1,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.0.1],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
2023-07-29T12:20:28Z	INFO	Adding/Updating	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "f9dab7db-40ee-4e74-aa70-843c5a41d8d3"}
I0729 12:20:28.954174   15487 service.go:82] Event: enqueueImpactedServiceExport, serviceexport not found ServiceExport.multicluster.x-k8s.io "kubernetes" not found
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "e8e9ed88-0bf1-41a3-a6f3-d9f751b75ad9"}
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"kube-dns","namespace":"kube-system"}, "namespace": "kube-system", "name": "kube-dns", "reconcileID": "5e312b93-6b9e-4531-8d3e-0738f2e3c1e9"}
2023-07-29T12:20:28Z	INFO	ServiceExportReconciler	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport", "ServiceExport": {"name":"kubernetes","namespace":"default"}, "namespace": "default", "name": "kubernetes", "reconcileID": "fde30a2c-7072-42d6-a2f7-393e0897686e"}
I0729 12:20:28.954186   15487 service.go:32] Event: service create
I0729 12:20:28.954145   15487 endpoints.go:87] Finished enqueueImpactedService [&Endpoints{ObjectMeta:{kube-dns  kube-system  8a327af1-c6e1-4b89-ac44-060fef016f56 1378 0 2023-07-04 05:28:32 +0000 UTC <nil> <nil> map[eks.amazonaws.com/component:kube-dns k8s-app:kube-dns kubernetes.io/cluster-service:true kubernetes.io/name:CoreDNS] map[] [] [] [{kube-controller-manager Update v1 2023-07-04 05:35:33 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:eks.amazonaws.com/component":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.41.201,TargetRef:&ObjectReference{Kind:Pod,Namespace:kube-system,Name:coredns-67f8f59c6c-z4bjx,UID:341c865a-c4c1-4f99-a111-ca937a0ca892,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.110,TargetRef:&ObjectReference{Kind:Pod,Namespace:kube-system,Name:coredns-67f8f59c6c-2f5x9,UID:ffb8a156-bd80-4f9f-9fa1-12af08f31864,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:dns-tcp,Port:53,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:dns,Port:53,Protocol:UDP,AppProtocol:nil,},},},},}] targetIPLIST[[192.168.41.201 192.168.60.110]]
I0729 12:20:28.954298   15487 endpoints.go:29] Event: endpoint create
I0729 12:20:28.953795   15487 service.go:119] Event: enqueueImpactedHTTPRoute: &Service{ObjectMeta:{kube-dns  kube-system  e64ad2ce-72e9-47c8-b66a-99290ccd1029 277 0 2023-07-04 05:28:29 +0000 UTC <nil> <nil> map[eks.amazonaws.com/component:kube-dns k8s-app:kube-dns kubernetes.io/cluster-service:true kubernetes.io/name:CoreDNS] map[kubectl.kubernetes.io/last-applied-configuration:{"apiVersion":"v1","kind":"Service","metadata":{"annotations":{"prometheus.io/port":"9153","prometheus.io/scrape":"true"},"labels":{"eks.amazonaws.com/component":"kube-dns","k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","kubernetes.io/name":"CoreDNS"},"name":"kube-dns","namespace":"kube-system"},"spec":{"clusterIP":"10.100.0.10","ports":[{"name":"dns","port":53,"protocol":"UDP"},{"name":"dns-tcp","port":53,"protocol":"TCP"}],"selector":{"k8s-app":"kube-dns"}}}
 prometheus.io/port:9153 prometheus.io/scrape:true] [] [] [{kubectl-client-side-apply Update v1 2023-07-04 05:28:29 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:eks.amazonaws.com/component":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:spec":{"f:clusterIP":{},"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":53,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":53,\"protocol\":\"UDP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:dns,Protocol:UDP,Port:53,TargetPort:{0 53 },NodePort:0,AppProtocol:nil,},ServicePort{Name:dns-tcp,Protocol:TCP,Port:53,TargetPort:{0 53 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{k8s-app: kube-dns,},ClusterIP:10.100.0.10,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.0.10],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:20:28.954390   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:20:28.954306   15487 endpoints.go:56] Event: enqueueImpactedService [&Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},}]
I0729 12:20:28.954312   15487 httproute_controller.go:251] Beginning -- reconcileHTTPRouteResource, [&{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5020592 1 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc0007ed4a0 0xc0007ed4b0 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc0007ed4c0 [] [] <nil>}] [] [{{{0xc0007ed4f0 0xc0007ed500 crown-19-xp02eti5zc 0xc0007ed510 0xc000705ea0} 0xc000705ea4} []} {{{0xc0007ed520 0xc0007ed530 crown-19-xp02eti5zc 0xc0007ed540 0xc000705ea8} 0xc000705eac} []}]}]} {{[]}}}]
I0729 12:20:28.954277   15487 service.go:53] Event: enqueueImpactedService: &Service{ObjectMeta:{kube-dns  kube-system  e64ad2ce-72e9-47c8-b66a-99290ccd1029 277 0 2023-07-04 05:28:29 +0000 UTC <nil> <nil> map[eks.amazonaws.com/component:kube-dns k8s-app:kube-dns kubernetes.io/cluster-service:true kubernetes.io/name:CoreDNS] map[kubectl.kubernetes.io/last-applied-configuration:{"apiVersion":"v1","kind":"Service","metadata":{"annotations":{"prometheus.io/port":"9153","prometheus.io/scrape":"true"},"labels":{"eks.amazonaws.com/component":"kube-dns","k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","kubernetes.io/name":"CoreDNS"},"name":"kube-dns","namespace":"kube-system"},"spec":{"clusterIP":"10.100.0.10","ports":[{"name":"dns","port":53,"protocol":"UDP"},{"name":"dns-tcp","port":53,"protocol":"TCP"}],"selector":{"k8s-app":"kube-dns"}}}
 prometheus.io/port:9153 prometheus.io/scrape:true] [] [] [{kubectl-client-side-apply Update v1 2023-07-04 05:28:29 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:eks.amazonaws.com/component":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:spec":{"f:clusterIP":{},"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":53,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":53,\"protocol\":\"UDP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:dns,Protocol:UDP,Port:53,TargetPort:{0 53 },NodePort:0,AppProtocol:nil,},ServicePort{Name:dns-tcp,Protocol:TCP,Port:53,TargetPort:{0 53 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{k8s-app: kube-dns,},ClusterIP:10.100.0.10,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.0.10],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:20:28.954551   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:20:28.954565   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc0007eda60 [] [] <nil>}] [] [{{{0xc0007eda90 0xc0007edaa0 crown-19-xp02eti5zc 0xc0007edab0 0xc000a96198} 0xc000a9619c} []} {{{0xc0007edac0 0xc0007edad0 crown-19-xp02eti5zc 0xc0007edae0 0xc000a961a0} 0xc000a961a4} []}]}
I0729 12:20:28.954431   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:20:28.954539   15487 endpoints.go:87] Finished enqueueImpactedService [&Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},}] targetIPLIST[[192.168.18.121 192.168.60.30]]
I0729 12:20:28.954623   15487 endpoints.go:29] Event: endpoint create
I0729 12:20:28.954589   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc0007eda90 0xc0007edaa0 crown-19-xp02eti5zc 0xc0007edab0 0xc000a96198} 0xc000a9619c} []} 
I0729 12:20:28.954556   15487 service.go:73] Event: enqueueImpactedServiceExport: &Service{ObjectMeta:{kube-dns  kube-system  e64ad2ce-72e9-47c8-b66a-99290ccd1029 277 0 2023-07-04 05:28:29 +0000 UTC <nil> <nil> map[eks.amazonaws.com/component:kube-dns k8s-app:kube-dns kubernetes.io/cluster-service:true kubernetes.io/name:CoreDNS] map[kubectl.kubernetes.io/last-applied-configuration:{"apiVersion":"v1","kind":"Service","metadata":{"annotations":{"prometheus.io/port":"9153","prometheus.io/scrape":"true"},"labels":{"eks.amazonaws.com/component":"kube-dns","k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","kubernetes.io/name":"CoreDNS"},"name":"kube-dns","namespace":"kube-system"},"spec":{"clusterIP":"10.100.0.10","ports":[{"name":"dns","port":53,"protocol":"UDP"},{"name":"dns-tcp","port":53,"protocol":"TCP"}],"selector":{"k8s-app":"kube-dns"}}}
 prometheus.io/port:9153 prometheus.io/scrape:true] [] [] [{kubectl-client-side-apply Update v1 2023-07-04 05:28:29 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:eks.amazonaws.com/component":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:spec":{"f:clusterIP":{},"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":53,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":53,\"protocol\":\"UDP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:dns,Protocol:UDP,Port:53,TargetPort:{0 53 },NodePort:0,AppProtocol:nil,},ServicePort{Name:dns-tcp,Protocol:TCP,Port:53,TargetPort:{0 53 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{k8s-app: kube-dns,},ClusterIP:10.100.0.10,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.0.10],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:20:28.954647   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:20:28.954658   15487 service.go:82] Event: enqueueImpactedServiceExport, serviceexport not found ServiceExport.multicluster.x-k8s.io "kube-dns" not found
I0729 12:20:28.954670   15487 service.go:32] Event: service create
I0729 12:20:28.954629   15487 endpoints.go:56] Event: enqueueImpactedService [&Endpoints{ObjectMeta:{kubernetes  default  ef74532f-ed5e-42b7-8f01-ee64aa41dfb2 825 0 2023-07-04 05:28:24 +0000 UTC <nil> <nil> map[endpointslice.kubernetes.io/skip-mirror:true] map[] [] [] [{kube-apiserver Update v1 2023-07-04 05:32:20 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:endpointslice.kubernetes.io/skip-mirror":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.28.221,TargetRef:nil,Hostname:,NodeName:nil,},EndpointAddress{IP:192.168.95.148,TargetRef:nil,Hostname:,NodeName:nil,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:https,Port:443,Protocol:TCP,AppProtocol:nil,},},},},}]
I0729 12:20:28.954702   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[] map[] map[] map[]}]
I0729 12:20:28.954612   15487 service.go:119] Event: enqueueImpactedHTTPRoute: &Service{ObjectMeta:{crown-19-xp02eti5zc  non-default  d89085e7-0917-442f-acc1-6636d0a6530f 5020636 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [service.ki8s.aws/resources] [{integration.test Update v1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":9114,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} } {main Update v1 2023-07-29 12:04:30 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"service.ki8s.aws/resources\"":{}}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:port-test,Protocol:TCP,Port:80,TargetPort:{0 80 },NodePort:0,AppProtocol:nil,},ServicePort{Name:http-prometheus,Protocol:TCP,Port:9114,TargetPort:{0 9114 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: port-test,},ClusterIP:10.100.105.92,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.105.92],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
2023-07-29T12:20:28Z	INFO	ServiceExportReconciler	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport", "ServiceExport": {"name":"kube-dns","namespace":"kube-system"}, "namespace": "kube-system", "name": "kube-dns", "reconcileID": "5616c24c-8bd4-4c1c-a74e-7034b3bf597b"}
I0729 12:20:28.954803   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc00076a840 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "56d24ecd-c30f-41d6-8a16-cbfa527e37b0"}
2023-07-29T12:20:28Z	DEBUG	events	Adding/Updating Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Reconcile"}
I0729 12:20:28.954839   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc0007edac0 0xc0007edad0 crown-19-xp02eti5zc 0xc0007edae0 0xc000a961a0} 0xc000a961a4} []} 
I0729 12:20:28.954864   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:20:28.954861   15487 service_controller.go:130] endpoints change trigger target IP list registration k8s-crown-19-xp02eti5zc-non-default and tg {{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}   []  false true}
I0729 12:20:28.954897   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{9 0} map[] map[] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[]}]
I0729 12:20:28.954912   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:20:28.954675   15487 service.go:53] Event: enqueueImpactedService: &Service{ObjectMeta:{crown-19-xp02eti5zc  non-default  d89085e7-0917-442f-acc1-6636d0a6530f 5020636 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [service.ki8s.aws/resources] [{integration.test Update v1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":9114,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} } {main Update v1 2023-07-29 12:04:30 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"service.ki8s.aws/resources\"":{}}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:port-test,Protocol:TCP,Port:80,TargetPort:{0 80 },NodePort:0,AppProtocol:nil,},ServicePort{Name:http-prometheus,Protocol:TCP,Port:9114,TargetPort:{0 9114 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: port-test,},ClusterIP:10.100.105.92,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.105.92],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:20:28.954831   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:20:28.954950   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc00076a840 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:20:28.954962   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:20:28.954701   15487 endpoints.go:87] Finished enqueueImpactedService [&Endpoints{ObjectMeta:{kubernetes  default  ef74532f-ed5e-42b7-8f01-ee64aa41dfb2 825 0 2023-07-04 05:28:24 +0000 UTC <nil> <nil> map[endpointslice.kubernetes.io/skip-mirror:true] map[] [] [] [{kube-apiserver Update v1 2023-07-04 05:32:20 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:endpointslice.kubernetes.io/skip-mirror":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.28.221,TargetRef:nil,Hostname:,NodeName:nil,},EndpointAddress{IP:192.168.95.148,TargetRef:nil,Hostname:,NodeName:nil,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:https,Port:443,Protocol:TCP,AppProtocol:nil,},},},},}] targetIPLIST[[192.168.28.221 192.168.95.148]]
I0729 12:20:28.954973   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:20:28.955054   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000d90260 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:28.955071   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:0, target:{192.168.18.121 9114} ***
I0729 12:20:28.955093   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000d90260 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
2023-07-29T12:20:28Z	INFO	ServiceExportReconciler	{"controller": "serviceexport", "controllerGroup": "multicluster.x-k8s.io", "controllerKind": "ServiceExport", "ServiceExport": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "d3d02a57-0588-4730-82b3-975982eac5db"}
I0729 12:20:28.955025   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:20:28.955102   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:0, target:{192.168.18.121 80} ***
I0729 12:20:28.955141   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000d90270 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:28.955161   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:0, target:{192.168.60.30 9114} ***
I0729 12:20:28.955168   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000d90270 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:28.955180   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:0, target:{192.168.60.30 80} ***
I0729 12:20:28.955185   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:20:28.954993   15487 service.go:73] Event: enqueueImpactedServiceExport: &Service{ObjectMeta:{crown-19-xp02eti5zc  non-default  d89085e7-0917-442f-acc1-6636d0a6530f 5020636 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [service.ki8s.aws/resources] [{integration.test Update v1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":9114,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} } {main Update v1 2023-07-29 12:04:30 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"service.ki8s.aws/resources\"":{}}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:port-test,Protocol:TCP,Port:80,TargetPort:{0 80 },NodePort:0,AppProtocol:nil,},ServicePort{Name:http-prometheus,Protocol:TCP,Port:9114,TargetPort:{0 9114 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: port-test,},ClusterIP:10.100.105.92,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.105.92],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:20:28.955234   15487 service.go:82] Event: enqueueImpactedServiceExport, serviceexport not found ServiceExport.multicluster.x-k8s.io "crown-19-xp02eti5zc" not found
I0729 12:20:28.955228   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000856390 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:28.955255   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
2023-07-29T12:20:28Z	INFO	Successfully built model	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "56d24ecd-c30f-41d6-8a16-cbfa527e37b0", "{\"id\":\"non-default/crown-19-xp02eti5zc\",\"resources\":{\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80},{\"targetID\":\"192.168.60.30\",\"port\":9114},{\"targetID\":\"192.168.60.30\",\"port\":80}]}}}}}": ""}
I0729 12:20:28.955262   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000856390 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:28.955283   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:20:28.955289   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc0008563d0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:28.955281   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc0006d6540 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}} 
I0729 12:20:28.955306   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:20:28.955313   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc0008563d0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:28.955321   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:20:28.955374   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
E0729 12:20:28.955642   15487 request.go:539] Failed request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: ""}, Error: InvalidParameter: 1 validation error(s) found.
- minimum field size of 17, ListTargetsInput.TargetGroupIdentifier.
I0729 12:20:28.955660   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [], err InvalidParameter: 1 validation error(s) found.
- minimum field size of 17, ListTargetsInput.TargetGroupIdentifier.
 
I0729 12:20:28.955674   15487 targets_manager.go:60] Failed to create target, tgName k8s-crown-19-xp02eti5zc-non-default tg {{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}   []  false true}
2023-07-29T12:20:28Z	INFO	Successfully deployed model	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "56d24ecd-c30f-41d6-8a16-cbfa527e37b0"}
I0729 12:20:28.955654   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:20:28.955709   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000e0e040 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:28.955720   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:20:28.955726   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000e0e040 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:28.955735   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:20:28.955741   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000e0e050 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:28.955751   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:20:28.955756   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000e0e050 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:28.955771   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:20:28.955776   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
2023-07-29T12:20:28Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"kubernetes","namespace":"default"}, "namespace": "default", "name": "kubernetes", "reconcileID": "6767d4f3-5ba9-4b01-a87c-72bf4605be49"}
I0729 12:20:28.955796   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:20:28.955802   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:20:28.955817   15487 model_build_listener.go:115] Building Listener: found matching listner Port 80
I0729 12:20:28.955822   15487 model_build_listener.go:158] listenerResourceName : gargo-20-exv6tcuxxl-non-default-80-HTTP 
I0729 12:20:28.955827   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:20:28.955830   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:20:28.955841   15487 model_build_rule.go:53] Parsing http rule spec: {[{0xc0007eda60 [] [] <nil>}] [] [{{{0xc0007eda90 0xc0007edaa0 crown-19-xp02eti5zc 0xc0007edab0 0xc000a96198} 0xc000a9619c} []} {{{0xc0007edac0 0xc0007edad0 crown-19-xp02eti5zc 0xc0007edae0 0xc000a961a0} 0xc000a961a4} []}]}
I0729 12:20:28.955851   15487 model_build_rule.go:71] Examing pathmatch type PathPrefix value / for for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:20:28.955866   15487 model_build_rule.go:81] Using PathMatchPathPrefix for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:20:28.955872   15487 model_build_rule.go:133] Generated ruleSpec is: {  0  / false true 0 [{

} {

} {

} {

} {

}]  {[]} 0001-01-01 00:00:00 +0000 UTC}
I0729 12:20:28.955892   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc0007eda90 0xc0007edaa0 crown-19-xp02eti5zc 0xc0007edab0 0xc000a96198} 0xc000a9619c} []}
I0729 12:20:28.955899   15487 model_build_rule.go:139] backendref kind: Service
I0729 12:20:28.955906   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc0007edac0 0xc0007edad0 crown-19-xp02eti5zc 0xc0007edae0 0xc000a961a0} 0xc000a961a4} []}
I0729 12:20:28.955912   15487 model_build_rule.go:139] backendref kind: Service
2023-07-29T12:20:28Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "f9dab7db-40ee-4e74-aa70-843c5a41d8d3", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Listener\":{\"gargo-20-exv6tcuxxl-non-default-80-HTTP\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"defaultaction\":{\"isimport\":false,\"backendservicename\":\"crown-19-xp02eti5zc\",\"backendservicenamespace\":\"non-default\"}}}},\"AWS::VPCServiceNetwork::Rule\":{\"rule-1\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"pathmatchvalue\":\"/\",\"pathmatchexact\":false,\"pathmatchprefix\":true,\"numofheadermatches\":0,\"MatchedHeaders\":[{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null}],\"id\":\"rule-1\",\"action\":{\"ruletarget\":[{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1},{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1}]},\"time\":\"2023-07-29T12:20:28.955915409Z\"}}},\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":false}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":false,\"LatticeID\":\"\"}}},\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80},{\"targetID\":\"192.168.60.30\",\"port\":9114},{\"targetID\":\"192.168.60.30\",\"port\":80}]}}}}}": ""}
I0729 12:20:28.956212   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc0005d4700]]
I0729 12:20:28.956218   15487 target_group_manager.go:66] Create Target Group API call for name k8s-crown-19-xp02eti5zc-non-default 
I0729 12:20:28.956311   15487 cloud.go:30] Request: VpcLattice/ListTargetGroups, Payload: {}
I0729 12:20:28.970963   15487 gatewayclass.go:34] GatwayClass, Update 
2023-07-29T12:20:28Z	INFO	ReconcileLoop	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass", "GatewayClass": {"name":"amazon-vpc-lattice"}, "namespace": "", "name": "amazon-vpc-lattice", "reconcileID": "6d64099b-b7b3-4651-b2bf-2984fd1666a5"}
2023-07-29T12:20:28Z	INFO	Creating LatticeGatewayClass 	{"controller": "gatewayclass", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "GatewayClass", "GatewayClass": {"name":"amazon-vpc-lattice"}, "namespace": "", "name": "amazon-vpc-lattice", "reconcileID": "6d64099b-b7b3-4651-b2bf-2984fd1666a5"}
2023-07-29T12:20:28Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "1c9b929d-d57d-4243-907a-071e793c41c6", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":false}}}}}": ""}
I0729 12:20:28.981910   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:20:28.981916   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc00001a0e0] 
I0729 12:20:28.981922   15487 service_network_synthesizer.go:98] Synthersing Gateway: Add test-gateway
I0729 12:20:28.981986   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:29.044238   15487 cloud.go:38] Response: VpcLattice/ListTargetGroups, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",      CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Id: "tg-04558f110adb72915",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Name: "k8s-crown-19-xp02eti5zc-non-default",      Port: 80,      Protocol: "HTTP",      ServiceArns: [],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-0d3c74aaa93e650b1"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",      CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Id: "tg-0afe8abcd40f467b8",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Name: "k8s-nginx-node-locust",      Port: 80,      Protocol: "HTTP",      ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-04c86859f0f6690b0"    }]}
I0729 12:20:29.044261   15487 target_group_manager.go:285] findTGByName: resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Id: "tg-04558f110adb72915",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Name: "k8s-crown-19-xp02eti5zc-non-default",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: [],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-0d3c74aaa93e650b1"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",
  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Id: "tg-0afe8abcd40f467b8",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Name: "k8s-nginx-node-locust",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-04c86859f0f6690b0"
}] 
I0729 12:20:29.044310   15487 target_group_manager.go:288] targetgroup k8s-crown-19-xp02eti5zc-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915
I0729 12:20:29.044333   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915] ds [&{{1 0} map[] map[] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[]}]
I0729 12:20:29.044345   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915]
I0729 12:20:29.044350   15487 target_group_synthesizer.go:399] targetGroup Synthesized successfully for {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false }: {arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915}
I0729 12:20:29.044358   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc0005d4700]
I0729 12:20:29.044365   15487 targets_synthesizer.go:35] Synthesize Targets: [0xc000b9b680] 
I0729 12:20:29.044369   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc00076a840 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}} 
I0729 12:20:29.044459   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:20:29.058559   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:29.058583   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:20:29.058655   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:20:29.098729   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [    {      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }  ]}
I0729 12:20:29.098742   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:20:29.098781   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ]
} 
I0729 12:20:29.098886   15487 cloud.go:30] Request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ]}
I0729 12:20:29.136764   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:20:29.136788   15487 service_network_manager.go:90] service_network[&{{0xc000aae1c0 AWS::VPCServiceNetwork::ServiceNetwork ServiceNetwork} {test-gateway non-default 403577698595 true false} <nil>}] exists, further check association
I0729 12:20:29.136885   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:20:29.191168   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",      CreatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-0e442775f83c0b5f4",      LastUpdatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE",      VpcId: "vpc-0d3c74aaa93e650b1"    }]}
I0729 12:20:29.191183   15487 service_network_manager.go:308] Mesh and Vpc association is active.
I0729 12:20:29.191190   15487 service_network_synthesizer.go:110] Synthersizing Gateway succeeded for gateway test-gateway, status {arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda} 
I0729 12:20:29.191198   15487 latticestore.go:169] AddServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda], id[sn-08c4f9a8bb41dcfda]
I0729 12:20:29.191260   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:29.265428   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:29.265458   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [test-gateway locust-gateway] 
I0729 12:20:29.265467   15487 service_network_synthesizer.go:130] SDK List: [test-gateway locust-gateway] 
I0729 12:20:29.265501   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork test-gateway needed to be deleted 
I0729 12:20:29.265509   15487 service_network_synthesizer.go:164] Skip deleting sdkServiceNetwork test-gateway since some gateway(s) still reference it
I0729 12:20:29.265513   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:20:29.265517   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:20:29.265581   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:29.332437   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:29.332450   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:20:29.332526   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:20:29.414031   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:20:29.414108   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:20:29.478005   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:20:29.478023   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:20:29.478029   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:20:29.478034   15487 service_network_synthesizer.go:50] Finish synthesizing ServiceNetworks/Gateways ...  
2023-07-29T12:20:29Z	INFO	Successfully deployed model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "1c9b929d-d57d-4243-907a-071e793c41c6"}
I0729 12:20:29.478067   15487 gateway_controller.go:241] serviceNetworkStatus : {{test-gateway 403577698595} arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda service network is created and associated} for test-gateway  error <nil> 
I0729 12:20:29.485625   15487 cloud.go:38] Response: VpcLattice/RegisterTargets, Body: {  Successful: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ],  Unsuccessful: []}
I0729 12:20:29.485648   15487 targets_manager.go:106] register pod to target group resp[{
  Successful: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ],
  Unsuccessful: []
}]
I0729 12:20:29.485677   15487 targets_manager.go:107] register pod to target group err[<nil>]
I0729 12:20:29.485682   15487 targets_manager.go:118] Targets register successfully
I0729 12:20:29.485691   15487 latticestore.go:479] Success UpdateTarget Group name[k8s-crown-19-xp02eti5zc-non-default]  targetIPList {[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}
I0729 12:20:29.485703   15487 service_synthesizer.go:34] Service-synthesize start: [0xc000158fd0] 
I0729 12:20:29.485708   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc00076a840 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc0007edbb0] [test-gateway]   false} <nil>}
I0729 12:20:29.485771   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
2023-07-29T12:20:29Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "51965f02-1eeb-4bb8-9a54-85993f8aca2f"}
2023-07-29T12:20:29Z	INFO	reconcile gateway resource	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "51965f02-1eeb-4bb8-9a54-85993f8aca2f"}
I0729 12:20:29.489352   15487 gateway_controller.go:368] Before update, the snapshot of listeners  [{http [{0xc000e735a0 HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc000e735b0 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}] 
I0729 12:20:29.489394   15487 gateway_controller.go:491] After update, the snapshot of listener status [{http [{<nil> HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]
I0729 12:20:29.490944   15487 gateway.go:46] Gateway Update 
2023-07-29T12:20:29Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "51965f02-1eeb-4bb8-9a54-85993f8aca2f", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":false}}}}}": ""}
I0729 12:20:29.509407   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:20:29.509422   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc000efa8c0] 
I0729 12:20:29.509429   15487 service_network_synthesizer.go:98] Synthersing Gateway: Add test-gateway
I0729 12:20:29.509488   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:29.527688   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:20:29.527701   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:20:29.527743   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:20:29.527749   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names [test-gateway]
I0729 12:20:29.527812   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0",  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:20:29.564819   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:29.564838   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:20:29.564910   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:20:29.580682   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:20:29.580705   15487 service_manager.go:168] ListServiceNetworkServiceAssociationsAsList, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}], err <nil>
I0729 12:20:29.580816   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:29.640510   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:20:29.640533   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}] err <nil>
I0729 12:20:29.640571   15487 latticestore.go:226] AddLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0] ds [&{{1 0} map[{test-gateway 403577698595}:0xc0007d6410] map[] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[]}]
I0729 12:20:29.640591   15487 service_synthesizer.go:73] Creating Service DNS
I0729 12:20:29.640599   15487 dnsendpoint_manager.go:38] Skipping creation of non-default/gargo-20-exv6tcuxxl-dns: detected no custom domain
I0729 12:20:29.640606   15487 service_synthesizer.go:81] serviceStatus {arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0 svc-031836347e3ec9cc0 gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws}, error = <nil> 
I0729 12:20:29.640611   15487 service_synthesizer.go:85] Service-synthesize end [0xc000158fd0] 
I0729 12:20:29.640620   15487 listener_synthesizer.go:37] Synthesize Listener:  [0xc0005a83c0]
I0729 12:20:29.640624   15487 listener_manager.go:39] Creating listener >>>> &{{0xc00076a840 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:20:29.640636   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc0007d6410] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[]}]
I0729 12:20:29.640644   15487 listener_manager.go:160] calling findListenerByNamePort serviceID svc-031836347e3ec9cc0 port 80 
I0729 12:20:29.640713   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:29.659080   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:20:29.659091   15487 service_network_manager.go:90] service_network[&{{0xc0006a7980 AWS::VPCServiceNetwork::ServiceNetwork ServiceNetwork} {test-gateway non-default 403577698595 true false} <nil>}] exists, further check association
I0729 12:20:29.659164   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:20:29.691384   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: []}
I0729 12:20:29.691396   15487 listener_manager.go:51] findListenerByNamePort &{{0xc00076a840 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} , lisenter <nil> error Listener does not exist
I0729 12:20:29.691522   15487 cloud.go:30] Request: VpcLattice/CreateListener, Payload: {  DefaultAction: {    FixedResponse: {      StatusCode: 404    }  },  Name: "gargo-20-exv6tcuxxl-non-default-80-http",  Port: 80,  Protocol: "HTTP",  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:29.710693   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",      CreatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-0e442775f83c0b5f4",      LastUpdatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE",      VpcId: "vpc-0d3c74aaa93e650b1"    }]}
I0729 12:20:29.710711   15487 service_network_manager.go:308] Mesh and Vpc association is active.
I0729 12:20:29.710718   15487 service_network_synthesizer.go:110] Synthersizing Gateway succeeded for gateway test-gateway, status {arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda} 
I0729 12:20:29.710725   15487 latticestore.go:169] AddServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda], id[sn-08c4f9a8bb41dcfda]
I0729 12:20:29.710737   15487 latticestore.go:175] UpdateServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda] id[sn-08c4f9a8bb41dcfda]
I0729 12:20:29.710801   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:29.766014   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:29.766029   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [test-gateway locust-gateway] 
I0729 12:20:29.766035   15487 service_network_synthesizer.go:130] SDK List: [test-gateway locust-gateway] 
I0729 12:20:29.766065   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork test-gateway needed to be deleted 
I0729 12:20:29.766070   15487 service_network_synthesizer.go:164] Skip deleting sdkServiceNetwork test-gateway since some gateway(s) still reference it
I0729 12:20:29.766074   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:20:29.766078   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:20:29.766139   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:29.806156   15487 cloud.go:38] Response: VpcLattice/CreateListener, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",  DefaultAction: {    FixedResponse: {      StatusCode: 404    }  },  Id: "listener-073fa530f297115f7",  Name: "gargo-20-exv6tcuxxl-non-default-80-http",  Port: 80,  Protocol: "HTTP",  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",  ServiceId: "svc-031836347e3ec9cc0"}
I0729 12:20:29.806172   15487 listener_manager.go:90] ############req creating listner ###########
I0729 12:20:29.806178   15487 listener_manager.go:91] {
  DefaultAction: {
    FixedResponse: {
      StatusCode: 404
    }
  },
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP",
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}
I0729 12:20:29.806211   15487 listener_manager.go:92] ############resp creating listner ###########
I0729 12:20:29.806216   15487 listener_manager.go:93] create listener err :<nil>
I0729 12:20:29.806221   15487 listener_manager.go:94] {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  DefaultAction: {
    FixedResponse: {
      StatusCode: 404
    }
  },
  Id: "listener-073fa530f297115f7",
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0"
}
I0729 12:20:29.806243   15487 listener_synthesizer.go:48] Success synthesize listern &{{0xc00076a840 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:20:29.806257   15487 latticestore.go:502] AddListener :{{gargo-20-exv6tcuxxl non-default 80 HTTP} arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7 listener-073fa530f297115f7}, ARN arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7, ID listener-073fa530f297115f7
I0729 12:20:29.806274   15487 listener_synthesizer.go:100] getSDKListeners service: [0xc000158fd0] err: <nil> 
I0729 12:20:29.806281   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000663c20] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:29.806298   15487 listener_manager.go:126] List - defaultListenerManager  serviceID svc-031836347e3ec9cc0 
I0729 12:20:29.806361   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:29.829152   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:29.829168   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:20:29.829235   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:20:29.851833   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:20:29.851851   15487 listener_manager.go:139] ############resp list listener ###########
I0729 12:20:29.851858   15487 listener_manager.go:140] {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "listener-073fa530f297115f7",
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "gargo-20-exv6tcuxxl-non-default-80-http",
      Port: 80,
      Protocol: "HTTP"
    }]
}
I0729 12:20:29.851905   15487 listener_synthesizer.go:125] getSDKListeners result >> [0xc0007a2700]
I0729 12:20:29.851913   15487 listener_synthesizer.go:57] getSDKlistener: [0xc0007a2700], err: <nil>
I0729 12:20:29.851920   15487 listener_synthesizer.go:86] findMatchListener: found matching moduleListener &{{0xc00076a840 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:20:29.851937   15487 rule_synthesizer.go:32] Synthesize rule = [0xc000952000], err :<nil> 
I0729 12:20:29.851947   15487 rule_manager.go:140] Rule --- Create >>>>>>>>.{{0xc00076a840 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc20c0 0xc000bc2100]} 2023-07-29 12:20:28.955915409 +0000 UTC m=+0.181695663} <nil>}
I0729 12:20:29.851978   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000663c20] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:29.852016   15487 rule_manager.go:160] Convert rule id rule-1 to priority 1 error: <nil> 
I0729 12:20:29.852103   15487 cloud.go:30] Request: VpcLattice/ListRules, Payload: {  ListenerIdentifier: "listener-073fa530f297115f7",  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:29.880834   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:20:29.880917   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:20:29.904547   15487 cloud.go:38] Response: VpcLattice/ListRules, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "rule-0a92e60dcd4f3219c",      IsDefault: true,      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "default",      Priority: 99999    }]}
I0729 12:20:29.904563   15487 rule_manager.go:427] ############list rules req############
I0729 12:20:29.904568   15487 rule_manager.go:428] rule: &{{0xc00076a840 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc20c0 0xc000bc2100]} 2023-07-29 12:20:28.955915409 +0000 UTC m=+0.181695663} <nil>} , serviceID: svc-031836347e3ec9cc0, listenerID listener-073fa530f297115f7 
I0729 12:20:29.904595   15487 rule_manager.go:430] ############list rules resp############
I0729 12:20:29.904599   15487 rule_manager.go:431] resp: {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "rule-0a92e60dcd4f3219c",
      IsDefault: true,
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "default",
      Priority: 99999
    }]
}, err: <nil>
I0729 12:20:29.904623   15487 rule_manager.go:443] findMatchingRule: ingnore the default rule {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "rule-0a92e60dcd4f3219c",
  IsDefault: true,
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "default",
  Priority: 99999
}
I0729 12:20:29.904646   15487 rule_manager.go:281] Setting sdk HttpMatch using rule.Spec {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc20c0 0xc000bc2100]} 2023-07-29 12:20:28.955915409 +0000 UTC m=+0.181695663}
I0729 12:20:29.904786   15487 cloud.go:30] Request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633228-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:29.935184   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:20:29.935205   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:20:29.935211   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:20:29.935215   15487 service_network_synthesizer.go:50] Finish synthesizing ServiceNetworks/Gateways ...  
2023-07-29T12:20:29Z	INFO	Successfully deployed model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "51965f02-1eeb-4bb8-9a54-85993f8aca2f"}
I0729 12:20:29.935233   15487 gateway_controller.go:241] serviceNetworkStatus : {{test-gateway 403577698595} arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda service network is created and associated} for test-gateway  error <nil> 
2023-07-29T12:20:29Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "d2ac6df6-3174-474e-9bb8-106ceaf66f4f"}
2023-07-29T12:20:29Z	INFO	reconcile gateway resource	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "d2ac6df6-3174-474e-9bb8-106ceaf66f4f"}
I0729 12:20:29.945096   15487 gateway_controller.go:368] Before update, the snapshot of listeners  [{http [{0xc000ea20b0 HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc000ea20c0 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}] 
I0729 12:20:29.945141   15487 gateway_controller.go:491] After update, the snapshot of listener status [{http [{<nil> HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]
2023-07-29T12:20:29Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "d2ac6df6-3174-474e-9bb8-106ceaf66f4f", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":false}}}}}": ""}
I0729 12:20:29.969878   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:20:29.969885   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc0007a2d90] 
I0729 12:20:29.969894   15487 service_network_synthesizer.go:98] Synthersing Gateway: Add test-gateway
I0729 12:20:29.969953   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
E0729 12:20:29.973614   15487 request.go:539] Failed request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633228-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}, Error: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7c680c21-4bba-4dae-9693-3695110d66f1"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
}
I0729 12:20:29.973637   15487 rule_manager.go:261] ############req creating rule ###########
I0729 12:20:29.973644   15487 rule_manager.go:262] {
  Action: {
    Forward: {
      TargetGroups: [{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        },{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        }]
    }
  },
  ListenerIdentifier: "listener-073fa530f297115f7",
  Match: {
    HttpMatch: {
      PathMatch: {
        Match: {
          Prefix: "/"
        }
      }
    }
  },
  Name: "k8s-1690633228-rule-1",
  Priority: 1,
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}
I0729 12:20:29.973672   15487 rule_manager.go:263] ############resp creating rule ###########, err: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7c680c21-4bba-4dae-9693-3695110d66f1"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:20:29.973692   15487 rule_manager.go:264] {

}
I0729 12:20:29.973700   15487 rule_synthesizer.go:39] Failed to create rule &{{0xc00076a840 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc20c0 0xc000bc2100]} 2023-07-29 12:20:28.955915409 +0000 UTC m=+0.181695663} <nil>}, err :ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7c680c21-4bba-4dae-9693-3695110d66f1"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:20:29.973738   15487 httproute_controller.go:230] HTTPRouteReconciler: Failed deploy gargo-20-exv6tcuxxl due to err ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7c680c21-4bba-4dae-9693-3695110d66f1"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
HandleReconcileError handle Error ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7c680c21-4bba-4dae-9693-3695110d66f1"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:20:29Z	DEBUG	events	retry reconcile...	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Retry-Reconcile"}
I0729 12:20:30.036120   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:30.036139   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:20:30.036221   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:20:30.088041   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:20:30.088060   15487 service_network_manager.go:90] service_network[&{{0xc000dfeb80 AWS::VPCServiceNetwork::ServiceNetwork ServiceNetwork} {test-gateway non-default 403577698595 true false} <nil>}] exists, further check association
I0729 12:20:30.088149   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:20:30.136818   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",      CreatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-0e442775f83c0b5f4",      LastUpdatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE",      VpcId: "vpc-0d3c74aaa93e650b1"    }]}
I0729 12:20:30.136836   15487 service_network_manager.go:308] Mesh and Vpc association is active.
I0729 12:20:30.136845   15487 service_network_synthesizer.go:110] Synthersizing Gateway succeeded for gateway test-gateway, status {arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda} 
I0729 12:20:30.136856   15487 latticestore.go:169] AddServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda], id[sn-08c4f9a8bb41dcfda]
I0729 12:20:30.136862   15487 latticestore.go:175] UpdateServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda] id[sn-08c4f9a8bb41dcfda]
I0729 12:20:30.136935   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:30.196707   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:30.196727   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [test-gateway locust-gateway] 
I0729 12:20:30.196735   15487 service_network_synthesizer.go:130] SDK List: [test-gateway locust-gateway] 
I0729 12:20:30.196764   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork test-gateway needed to be deleted 
I0729 12:20:30.196772   15487 service_network_synthesizer.go:164] Skip deleting sdkServiceNetwork test-gateway since some gateway(s) still reference it
I0729 12:20:30.196778   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:20:30.196784   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:20:30.196869   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:20:30.254678   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:20:30.254705   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:20:30.254785   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:20:30.307105   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:20:30.307208   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:20:30.370281   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:20:30.370303   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:20:30.370313   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:20:30.370319   15487 service_network_synthesizer.go:50] Finish synthesizing ServiceNetworks/Gateways ...  
2023-07-29T12:20:30Z	INFO	Successfully deployed model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "d2ac6df6-3174-474e-9bb8-106ceaf66f4f"}
I0729 12:20:30.370337   15487 gateway_controller.go:241] serviceNetworkStatus : {{test-gateway 403577698595} arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda service network is created and associated} for test-gateway  error <nil> 
2023-07-29T12:20:49Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "97169341-61f0-4c96-8505-bc615fb93170"}
I0729 12:20:49.974038   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc000899010 0xc000899050 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc000899090 [] [] <nil>}] [] [{{{0xc000899100 0xc000899140 crown-19-xp02eti5zc 0xc000899180 0xc0007ac4b8} 0xc0007ac4bc} []} {{{0xc0008991c0 0xc000899200 crown-19-xp02eti5zc 0xc000899240 0xc0007ac500} 0xc0007ac504} []}]}]}
2023-07-29T12:20:49Z	INFO	Adding/Updating	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "97169341-61f0-4c96-8505-bc615fb93170"}
I0729 12:20:49.974091   15487 httproute_controller.go:251] Beginning -- reconcileHTTPRouteResource, [&{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5020592 1 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc000899010 0xc000899050 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc000899090 [] [] <nil>}] [] [{{{0xc000899100 0xc000899140 crown-19-xp02eti5zc 0xc000899180 0xc0007ac4b8} 0xc0007ac4bc} []} {{{0xc0008991c0 0xc000899200 crown-19-xp02eti5zc 0xc000899240 0xc0007ac500} 0xc0007ac504} []}]}]} {{[]}}}]
I0729 12:20:49.974187   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:20:49.974198   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc0008524f0 [] [] <nil>}] [] [{{{0xc000852550 0xc000852590 crown-19-xp02eti5zc 0xc0008525d0 0xc0007ac528} 0xc0007ac52c} []} {{{0xc000852610 0xc000852650 crown-19-xp02eti5zc 0xc000852670 0xc0007ac530} 0xc0007ac534} []}]}
I0729 12:20:49.974207   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc000852550 0xc000852590 crown-19-xp02eti5zc 0xc0008525d0 0xc0007ac528} 0xc0007ac52c} []} 
I0729 12:20:49.974215   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
2023-07-29T12:20:49Z	DEBUG	events	Adding/Updating Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Reconcile"}
I0729 12:20:49.974233   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:49.974251   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:20:49.974257   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000bc2800 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:20:49.974273   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc000852610 0xc000852650 crown-19-xp02eti5zc 0xc000852670 0xc0007ac530} 0xc0007ac534} []} 
I0729 12:20:49.974278   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:20:49.974289   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:49.974299   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:20:49.974315   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000bc2800 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:20:49.974341   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:20:49.974412   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000853640 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:49.974426   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:20:49.974434   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000853640 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:49.974444   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:20:49.974451   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000853660 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:49.974461   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:20:49.974467   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000853660 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:49.974478   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:20:49.974485   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:20:49.974504   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:20:49.974559   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000853ff0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:49.974570   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:20:49.974577   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000853ff0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:49.974585   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:20:49.974590   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc00083c000 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:20:49.974598   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:20:49.974604   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc00083c000 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:20:49.974611   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:20:49.974616   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:20:49.974633   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:20:49.974636   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:20:49.974653   15487 model_build_listener.go:115] Building Listener: found matching listner Port 80
I0729 12:20:49.974659   15487 model_build_listener.go:158] listenerResourceName : gargo-20-exv6tcuxxl-non-default-80-HTTP 
I0729 12:20:49.974664   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:20:49.974668   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:20:49.974679   15487 model_build_rule.go:53] Parsing http rule spec: {[{0xc0008524f0 [] [] <nil>}] [] [{{{0xc000852550 0xc000852590 crown-19-xp02eti5zc 0xc0008525d0 0xc0007ac528} 0xc0007ac52c} []} {{{0xc000852610 0xc000852650 crown-19-xp02eti5zc 0xc000852670 0xc0007ac530} 0xc0007ac534} []}]}
I0729 12:20:49.974689   15487 model_build_rule.go:71] Examing pathmatch type PathPrefix value / for for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:20:49.974698   15487 model_build_rule.go:81] Using PathMatchPathPrefix for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:20:49.974704   15487 model_build_rule.go:133] Generated ruleSpec is: {  0  / false true 0 [{

} {

} {

} {

} {

}]  {[]} 0001-01-01 00:00:00 +0000 UTC}
I0729 12:20:49.974732   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc000852550 0xc000852590 crown-19-xp02eti5zc 0xc0008525d0 0xc0007ac528} 0xc0007ac52c} []}
I0729 12:20:49.974739   15487 model_build_rule.go:139] backendref kind: Service
I0729 12:20:49.974746   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc000852610 0xc000852650 crown-19-xp02eti5zc 0xc000852670 0xc0007ac530} 0xc0007ac534} []}
I0729 12:20:49.974752   15487 model_build_rule.go:139] backendref kind: Service
2023-07-29T12:20:49Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "97169341-61f0-4c96-8505-bc615fb93170", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Listener\":{\"gargo-20-exv6tcuxxl-non-default-80-HTTP\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"defaultaction\":{\"isimport\":false,\"backendservicename\":\"crown-19-xp02eti5zc\",\"backendservicenamespace\":\"non-default\"}}}},\"AWS::VPCServiceNetwork::Rule\":{\"rule-1\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"pathmatchvalue\":\"/\",\"pathmatchexact\":false,\"pathmatchprefix\":true,\"numofheadermatches\":0,\"MatchedHeaders\":[{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null}],\"id\":\"rule-1\",\"action\":{\"ruletarget\":[{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1},{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1}]},\"time\":\"2023-07-29T12:20:49.974755706Z\"}}},\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":false}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":false,\"LatticeID\":\"\"}}},\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80},{\"targetID\":\"192.168.60.30\",\"port\":9114},{\"targetID\":\"192.168.60.30\",\"port\":80}]}}}}}": ""}
I0729 12:20:49.974842   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc000af8b00]]
I0729 12:20:49.974849   15487 target_group_manager.go:66] Create Target Group API call for name k8s-crown-19-xp02eti5zc-non-default 
I0729 12:20:49.974959   15487 cloud.go:30] Request: VpcLattice/ListTargetGroups, Payload: {}
I0729 12:20:50.022907   15487 cloud.go:38] Response: VpcLattice/ListTargetGroups, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",      CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Id: "tg-04558f110adb72915",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Name: "k8s-crown-19-xp02eti5zc-non-default",      Port: 80,      Protocol: "HTTP",      ServiceArns: [],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-0d3c74aaa93e650b1"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",      CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Id: "tg-0afe8abcd40f467b8",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Name: "k8s-nginx-node-locust",      Port: 80,      Protocol: "HTTP",      ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-04c86859f0f6690b0"    }]}
I0729 12:20:50.022927   15487 target_group_manager.go:285] findTGByName: resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Id: "tg-04558f110adb72915",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Name: "k8s-crown-19-xp02eti5zc-non-default",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: [],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-0d3c74aaa93e650b1"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",
  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Id: "tg-0afe8abcd40f467b8",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Name: "k8s-nginx-node-locust",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-04c86859f0f6690b0"
}] 
I0729 12:20:50.022977   15487 target_group_manager.go:288] targetgroup k8s-crown-19-xp02eti5zc-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915
I0729 12:20:50.022985   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:50.023001   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915]
I0729 12:20:50.023007   15487 target_group_synthesizer.go:399] targetGroup Synthesized successfully for {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false }: {arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915}
I0729 12:20:50.023018   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc000af8b00]
I0729 12:20:50.023026   15487 targets_synthesizer.go:35] Synthesize Targets: [0xc000b9a750] 
I0729 12:20:50.023031   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc000bc2800 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}} 
I0729 12:20:50.023125   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:20:50.085073   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [    {      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }  ]}
I0729 12:20:50.085091   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:20:50.085122   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ]
} 
I0729 12:20:50.085236   15487 cloud.go:30] Request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ]}
I0729 12:20:50.575913   15487 cloud.go:38] Response: VpcLattice/RegisterTargets, Body: {  Successful: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ],  Unsuccessful: []}
I0729 12:20:50.575938   15487 targets_manager.go:106] register pod to target group resp[{
  Successful: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ],
  Unsuccessful: []
}]
I0729 12:20:50.575959   15487 targets_manager.go:107] register pod to target group err[<nil>]
I0729 12:20:50.575966   15487 targets_manager.go:118] Targets register successfully
I0729 12:20:50.575976   15487 latticestore.go:479] Success UpdateTarget Group name[k8s-crown-19-xp02eti5zc-non-default]  targetIPList {[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}
I0729 12:20:50.575991   15487 service_synthesizer.go:34] Service-synthesize start: [0xc00072abb0] 
I0729 12:20:50.575996   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc000bc2800 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc000852910] [test-gateway]   false} <nil>}
I0729 12:20:50.576085   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
I0729 12:20:50.619461   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:20:50.619493   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:20:50.619538   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:20:50.619545   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names [test-gateway]
I0729 12:20:50.619628   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0",  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:20:50.671325   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:20:50.671338   15487 service_manager.go:168] ListServiceNetworkServiceAssociationsAsList, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}], err <nil>
I0729 12:20:50.671450   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:50.734438   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:20:50.734475   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}] err <nil>
I0729 12:20:50.734556   15487 latticestore.go:226] AddLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000a92820] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:50.734592   15487 latticestore.go:236] UpdateLatticeService: name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0]
I0729 12:20:50.734605   15487 service_synthesizer.go:73] Creating Service DNS
I0729 12:20:50.734617   15487 dnsendpoint_manager.go:38] Skipping creation of non-default/gargo-20-exv6tcuxxl-dns: detected no custom domain
I0729 12:20:50.734622   15487 service_synthesizer.go:81] serviceStatus {arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0 svc-031836347e3ec9cc0 gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws}, error = <nil> 
I0729 12:20:50.734633   15487 service_synthesizer.go:85] Service-synthesize end [0xc00072abb0] 
I0729 12:20:50.734644   15487 listener_synthesizer.go:37] Synthesize Listener:  [0xc0009172c0]
I0729 12:20:50.734656   15487 listener_manager.go:39] Creating listener >>>> &{{0xc000bc2800 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:20:50.734679   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00099b140]}]
I0729 12:20:50.734700   15487 listener_manager.go:160] calling findListenerByNamePort serviceID svc-031836347e3ec9cc0 port 80 
I0729 12:20:50.734810   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:50.778116   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:20:50.778157   15487 listener_manager.go:170] findListenerByNamePort>> output port 80 item: {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} 
I0729 12:20:50.778189   15487 listener_manager.go:172] Listener svc-031836347e3ec9cc0 Port 80 already exists arn: 0xc000a1e090 
I0729 12:20:50.778195   15487 listener_manager.go:51] findListenerByNamePort &{{0xc000bc2800 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} , lisenter {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} error <nil>
I0729 12:20:50.778242   15487 listener_synthesizer.go:48] Success synthesize listern &{{0xc000bc2800 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:20:50.778256   15487 latticestore.go:502] AddListener :{{gargo-20-exv6tcuxxl non-default 80 HTTP} arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7 listener-073fa530f297115f7}, ARN arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7, ID listener-073fa530f297115f7
I0729 12:20:50.778271   15487 listener_synthesizer.go:100] getSDKListeners service: [0xc00072abb0] err: <nil> 
I0729 12:20:50.778281   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:20:50.778308   15487 listener_manager.go:126] List - defaultListenerManager  serviceID svc-031836347e3ec9cc0 
I0729 12:20:50.778410   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:50.824545   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:20:50.824571   15487 listener_manager.go:139] ############resp list listener ###########
I0729 12:20:50.824577   15487 listener_manager.go:140] {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "listener-073fa530f297115f7",
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "gargo-20-exv6tcuxxl-non-default-80-http",
      Port: 80,
      Protocol: "HTTP"
    }]
}
I0729 12:20:50.824601   15487 listener_synthesizer.go:125] getSDKListeners result >> [0xc0003d00e0]
I0729 12:20:50.824608   15487 listener_synthesizer.go:57] getSDKlistener: [0xc0003d00e0], err: <nil>
I0729 12:20:50.824613   15487 listener_synthesizer.go:86] findMatchListener: found matching moduleListener &{{0xc000bc2800 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:20:50.824640   15487 rule_synthesizer.go:32] Synthesize rule = [0xc0005349a0], err :<nil> 
I0729 12:20:50.824648   15487 rule_manager.go:140] Rule --- Create >>>>>>>>.{{0xc000bc2800 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc2c00 0xc000bc2c40]} 2023-07-29 12:20:49.974755706 +0000 UTC m=+21.200535956} <nil>}
I0729 12:20:50.824668   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:20:50.824691   15487 rule_manager.go:160] Convert rule id rule-1 to priority 1 error: <nil> 
I0729 12:20:50.824783   15487 cloud.go:30] Request: VpcLattice/ListRules, Payload: {  ListenerIdentifier: "listener-073fa530f297115f7",  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:20:50.876620   15487 cloud.go:38] Response: VpcLattice/ListRules, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "rule-0a92e60dcd4f3219c",      IsDefault: true,      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "default",      Priority: 99999    }]}
I0729 12:20:50.876641   15487 rule_manager.go:427] ############list rules req############
I0729 12:20:50.876647   15487 rule_manager.go:428] rule: &{{0xc000bc2800 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc2c00 0xc000bc2c40]} 2023-07-29 12:20:49.974755706 +0000 UTC m=+21.200535956} <nil>} , serviceID: svc-031836347e3ec9cc0, listenerID listener-073fa530f297115f7 
I0729 12:20:50.876670   15487 rule_manager.go:430] ############list rules resp############
I0729 12:20:50.876674   15487 rule_manager.go:431] resp: {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "rule-0a92e60dcd4f3219c",
      IsDefault: true,
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "default",
      Priority: 99999
    }]
}, err: <nil>
I0729 12:20:50.876696   15487 rule_manager.go:443] findMatchingRule: ingnore the default rule {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "rule-0a92e60dcd4f3219c",
  IsDefault: true,
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "default",
  Priority: 99999
}
I0729 12:20:50.876720   15487 rule_manager.go:281] Setting sdk HttpMatch using rule.Spec {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc2c00 0xc000bc2c40]} 2023-07-29 12:20:49.974755706 +0000 UTC m=+21.200535956}
I0729 12:20:50.876878   15487 cloud.go:30] Request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633249-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}
E0729 12:20:50.931472   15487 request.go:539] Failed request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633249-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}, Error: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "ba683154-3a83-4c79-84c1-071b3d265201"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
}
I0729 12:20:50.931500   15487 rule_manager.go:261] ############req creating rule ###########
I0729 12:20:50.931507   15487 rule_manager.go:262] {
  Action: {
    Forward: {
      TargetGroups: [{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        },{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        }]
    }
  },
  ListenerIdentifier: "listener-073fa530f297115f7",
  Match: {
    HttpMatch: {
      PathMatch: {
        Match: {
          Prefix: "/"
        }
      }
    }
  },
  Name: "k8s-1690633249-rule-1",
  Priority: 1,
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}
I0729 12:20:50.931534   15487 rule_manager.go:263] ############resp creating rule ###########, err: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "ba683154-3a83-4c79-84c1-071b3d265201"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:20:50.931552   15487 rule_manager.go:264] {

}
I0729 12:20:50.931559   15487 rule_synthesizer.go:39] Failed to create rule &{{0xc000bc2800 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc000bc2c00 0xc000bc2c40]} 2023-07-29 12:20:49.974755706 +0000 UTC m=+21.200535956} <nil>}, err :ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "ba683154-3a83-4c79-84c1-071b3d265201"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:20:50.931596   15487 httproute_controller.go:230] HTTPRouteReconciler: Failed deploy gargo-20-exv6tcuxxl due to err ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "ba683154-3a83-4c79-84c1-071b3d265201"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
HandleReconcileError handle Error ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "ba683154-3a83-4c79-84c1-071b3d265201"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:20:50Z	DEBUG	events	retry reconcile...	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Retry-Reconcile"}
2023-07-29T12:21:10Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "03c1e441-324d-4467-b11c-c35525818331"}
I0729 12:21:10.932701   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc0009a66f0 0xc0009a6700 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc0009a6710 [] [] <nil>}] [] [{{{0xc0009a6740 0xc0009a6750 crown-19-xp02eti5zc 0xc0009a6760 0xc000ea53c0} 0xc000ea53c4} []} {{{0xc0009a6770 0xc0009a6780 crown-19-xp02eti5zc 0xc0009a6790 0xc000ea53c8} 0xc000ea53cc} []}]}]}
2023-07-29T12:21:10Z	INFO	Adding/Updating	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "03c1e441-324d-4467-b11c-c35525818331"}
I0729 12:21:10.932746   15487 httproute_controller.go:251] Beginning -- reconcileHTTPRouteResource, [&{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5020592 1 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc0009a66f0 0xc0009a6700 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc0009a6710 [] [] <nil>}] [] [{{{0xc0009a6740 0xc0009a6750 crown-19-xp02eti5zc 0xc0009a6760 0xc000ea53c0} 0xc000ea53c4} []} {{{0xc0009a6770 0xc0009a6780 crown-19-xp02eti5zc 0xc0009a6790 0xc000ea53c8} 0xc000ea53cc} []}]}]} {{[]}}}]
I0729 12:21:10.932815   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:21:10.932824   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc0009a6b40 [] [] <nil>}] [] [{{{0xc0009a6b80 0xc0009a6c10 crown-19-xp02eti5zc 0xc0009a6c20 0xc000ea53f0} 0xc000ea53f4} []} {{{0xc0009a6c40 0xc0009a6c50 crown-19-xp02eti5zc 0xc0009a6c60 0xc000ea53f8} 0xc000ea53fc} []}]}
I0729 12:21:10.932832   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc0009a6b80 0xc0009a6c10 crown-19-xp02eti5zc 0xc0009a6c20 0xc000ea53f0} 0xc000ea53f4} []} 
I0729 12:21:10.932840   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:21:10.932863   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:21:10.932886   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:21:10.932893   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000b4aa40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:21:10.932906   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc0009a6c40 0xc0009a6c50 crown-19-xp02eti5zc 0xc0009a6c60 0xc000ea53f8} 0xc000ea53fc} []} 
I0729 12:21:10.932911   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:21:10.932920   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:21:10.932932   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:21:10.932946   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000b4aa40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:21:10.932971   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
2023-07-29T12:21:10Z	DEBUG	events	Adding/Updating Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Reconcile"}
I0729 12:21:10.933027   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc0009a7220 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:10.933051   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:21:10.933066   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc0009a7220 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:10.933091   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:21:10.933096   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc0009a7230 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:10.933106   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:21:10.933111   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc0009a7230 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:10.933125   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:21:10.933131   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:21:10.933164   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:21:10.933222   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000a1ecd0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:10.933230   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:21:10.933238   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000a1ecd0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:10.933245   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:21:10.933252   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000a1ece0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:10.933262   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:21:10.933267   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000a1ece0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:10.933274   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:21:10.933278   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:21:10.933293   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:21:10.933297   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:21:10.933315   15487 model_build_listener.go:115] Building Listener: found matching listner Port 80
I0729 12:21:10.933320   15487 model_build_listener.go:158] listenerResourceName : gargo-20-exv6tcuxxl-non-default-80-HTTP 
I0729 12:21:10.933324   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:21:10.933327   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:21:10.933338   15487 model_build_rule.go:53] Parsing http rule spec: {[{0xc0009a6b40 [] [] <nil>}] [] [{{{0xc0009a6b80 0xc0009a6c10 crown-19-xp02eti5zc 0xc0009a6c20 0xc000ea53f0} 0xc000ea53f4} []} {{{0xc0009a6c40 0xc0009a6c50 crown-19-xp02eti5zc 0xc0009a6c60 0xc000ea53f8} 0xc000ea53fc} []}]}
I0729 12:21:10.933349   15487 model_build_rule.go:71] Examing pathmatch type PathPrefix value / for for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:21:10.933354   15487 model_build_rule.go:81] Using PathMatchPathPrefix for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:21:10.933360   15487 model_build_rule.go:133] Generated ruleSpec is: {  0  / false true 0 [{

} {

} {

} {

} {

}]  {[]} 0001-01-01 00:00:00 +0000 UTC}
I0729 12:21:10.933378   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc0009a6b80 0xc0009a6c10 crown-19-xp02eti5zc 0xc0009a6c20 0xc000ea53f0} 0xc000ea53f4} []}
I0729 12:21:10.933385   15487 model_build_rule.go:139] backendref kind: Service
I0729 12:21:10.933393   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc0009a6c40 0xc0009a6c50 crown-19-xp02eti5zc 0xc0009a6c60 0xc000ea53f8} 0xc000ea53fc} []}
I0729 12:21:10.933399   15487 model_build_rule.go:139] backendref kind: Service
2023-07-29T12:21:10Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "03c1e441-324d-4467-b11c-c35525818331", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Listener\":{\"gargo-20-exv6tcuxxl-non-default-80-HTTP\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"defaultaction\":{\"isimport\":false,\"backendservicename\":\"crown-19-xp02eti5zc\",\"backendservicenamespace\":\"non-default\"}}}},\"AWS::VPCServiceNetwork::Rule\":{\"rule-1\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"pathmatchvalue\":\"/\",\"pathmatchexact\":false,\"pathmatchprefix\":true,\"numofheadermatches\":0,\"MatchedHeaders\":[{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null}],\"id\":\"rule-1\",\"action\":{\"ruletarget\":[{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1},{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1}]},\"time\":\"2023-07-29T12:21:10.933402562Z\"}}},\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":false}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":false,\"LatticeID\":\"\"}}},\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80},{\"targetID\":\"192.168.60.30\",\"port\":9114},{\"targetID\":\"192.168.60.30\",\"port\":80}]}}}}}": ""}
I0729 12:21:10.933485   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc000f52000]]
I0729 12:21:10.933490   15487 target_group_manager.go:66] Create Target Group API call for name k8s-crown-19-xp02eti5zc-non-default 
I0729 12:21:10.933572   15487 cloud.go:30] Request: VpcLattice/ListTargetGroups, Payload: {}
I0729 12:21:10.983230   15487 cloud.go:38] Response: VpcLattice/ListTargetGroups, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",      CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Id: "tg-04558f110adb72915",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Name: "k8s-crown-19-xp02eti5zc-non-default",      Port: 80,      Protocol: "HTTP",      ServiceArns: [],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-0d3c74aaa93e650b1"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",      CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Id: "tg-0afe8abcd40f467b8",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Name: "k8s-nginx-node-locust",      Port: 80,      Protocol: "HTTP",      ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-04c86859f0f6690b0"    }]}
I0729 12:21:10.983251   15487 target_group_manager.go:285] findTGByName: resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Id: "tg-04558f110adb72915",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Name: "k8s-crown-19-xp02eti5zc-non-default",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: [],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-0d3c74aaa93e650b1"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",
  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Id: "tg-0afe8abcd40f467b8",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Name: "k8s-nginx-node-locust",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-04c86859f0f6690b0"
}] 
I0729 12:21:10.983300   15487 target_group_manager.go:288] targetgroup k8s-crown-19-xp02eti5zc-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915
I0729 12:21:10.983306   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:21:10.983318   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915]
I0729 12:21:10.983324   15487 target_group_synthesizer.go:399] targetGroup Synthesized successfully for {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false }: {arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915}
I0729 12:21:10.983337   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc000f52000]
I0729 12:21:10.983344   15487 targets_synthesizer.go:35] Synthesize Targets: [0xc000c26750] 
I0729 12:21:10.983349   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc000b4aa40 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}} 
I0729 12:21:10.983433   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:21:11.050450   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [    {      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }  ]}
I0729 12:21:11.050463   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:21:11.050492   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ]
} 
I0729 12:21:11.050598   15487 cloud.go:30] Request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ]}
I0729 12:21:11.287989   15487 cloud.go:38] Response: VpcLattice/RegisterTargets, Body: {  Successful: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ],  Unsuccessful: []}
I0729 12:21:11.288010   15487 targets_manager.go:106] register pod to target group resp[{
  Successful: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ],
  Unsuccessful: []
}]
I0729 12:21:11.288030   15487 targets_manager.go:107] register pod to target group err[<nil>]
I0729 12:21:11.288036   15487 targets_manager.go:118] Targets register successfully
I0729 12:21:11.288044   15487 latticestore.go:479] Success UpdateTarget Group name[k8s-crown-19-xp02eti5zc-non-default]  targetIPList {[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}
I0729 12:21:11.288057   15487 service_synthesizer.go:34] Service-synthesize start: [0xc000159130] 
I0729 12:21:11.288061   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc000b4aa40 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc0009a6e10] [test-gateway]   false} <nil>}
I0729 12:21:11.288147   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
I0729 12:21:11.335645   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:21:11.335669   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:21:11.335714   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:21:11.335719   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names [test-gateway]
I0729 12:21:11.335798   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0",  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:21:11.392054   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:21:11.392074   15487 service_manager.go:168] ListServiceNetworkServiceAssociationsAsList, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}], err <nil>
I0729 12:21:11.392185   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:11.446887   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:21:11.446906   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}] err <nil>
I0729 12:21:11.446947   15487 latticestore.go:226] AddLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc000592280] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:21:11.446965   15487 latticestore.go:236] UpdateLatticeService: name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0]
I0729 12:21:11.446972   15487 service_synthesizer.go:73] Creating Service DNS
I0729 12:21:11.446979   15487 dnsendpoint_manager.go:38] Skipping creation of non-default/gargo-20-exv6tcuxxl-dns: detected no custom domain
I0729 12:21:11.446984   15487 service_synthesizer.go:81] serviceStatus {arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0 svc-031836347e3ec9cc0 gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws}, error = <nil> 
I0729 12:21:11.446990   15487 service_synthesizer.go:85] Service-synthesize end [0xc000159130] 
I0729 12:21:11.446999   15487 listener_synthesizer.go:37] Synthesize Listener:  [0xc000c30320]
I0729 12:21:11.447003   15487 listener_manager.go:39] Creating listener >>>> &{{0xc000b4aa40 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:11.447025   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e92960]}]
I0729 12:21:11.447037   15487 listener_manager.go:160] calling findListenerByNamePort serviceID svc-031836347e3ec9cc0 port 80 
I0729 12:21:11.447111   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:11.493094   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:21:11.493109   15487 listener_manager.go:170] findListenerByNamePort>> output port 80 item: {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} 
I0729 12:21:11.493130   15487 listener_manager.go:172] Listener svc-031836347e3ec9cc0 Port 80 already exists arn: 0xc000a1ffb0 
I0729 12:21:11.493135   15487 listener_manager.go:51] findListenerByNamePort &{{0xc000b4aa40 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} , lisenter {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} error <nil>
I0729 12:21:11.493163   15487 listener_synthesizer.go:48] Success synthesize listern &{{0xc000b4aa40 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:11.493175   15487 latticestore.go:502] AddListener :{{gargo-20-exv6tcuxxl non-default 80 HTTP} arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7 listener-073fa530f297115f7}, ARN arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7, ID listener-073fa530f297115f7
I0729 12:21:11.493185   15487 listener_synthesizer.go:100] getSDKListeners service: [0xc000159130] err: <nil> 
I0729 12:21:11.493191   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:11.493203   15487 listener_manager.go:126] List - defaultListenerManager  serviceID svc-031836347e3ec9cc0 
I0729 12:21:11.493266   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:11.540366   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:21:11.540386   15487 listener_manager.go:139] ############resp list listener ###########
I0729 12:21:11.540391   15487 listener_manager.go:140] {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "listener-073fa530f297115f7",
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "gargo-20-exv6tcuxxl-non-default-80-http",
      Port: 80,
      Protocol: "HTTP"
    }]
}
I0729 12:21:11.540432   15487 listener_synthesizer.go:125] getSDKListeners result >> [0xc00016a070]
I0729 12:21:11.540438   15487 listener_synthesizer.go:57] getSDKlistener: [0xc00016a070], err: <nil>
I0729 12:21:11.540442   15487 listener_synthesizer.go:86] findMatchListener: found matching moduleListener &{{0xc000b4aa40 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:11.540454   15487 rule_synthesizer.go:32] Synthesize rule = [0xc00079ec60], err :<nil> 
I0729 12:21:11.540461   15487 rule_manager.go:140] Rule --- Create >>>>>>>>.{{0xc000b4aa40 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fa800 0xc0007fa840]} 2023-07-29 12:21:10.933402562 +0000 UTC m=+42.159182810} <nil>}
I0729 12:21:11.540480   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:11.540498   15487 rule_manager.go:160] Convert rule id rule-1 to priority 1 error: <nil> 
I0729 12:21:11.540573   15487 cloud.go:30] Request: VpcLattice/ListRules, Payload: {  ListenerIdentifier: "listener-073fa530f297115f7",  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:11.591065   15487 cloud.go:38] Response: VpcLattice/ListRules, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "rule-0a92e60dcd4f3219c",      IsDefault: true,      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "default",      Priority: 99999    }]}
I0729 12:21:11.591082   15487 rule_manager.go:427] ############list rules req############
I0729 12:21:11.591087   15487 rule_manager.go:428] rule: &{{0xc000b4aa40 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fa800 0xc0007fa840]} 2023-07-29 12:21:10.933402562 +0000 UTC m=+42.159182810} <nil>} , serviceID: svc-031836347e3ec9cc0, listenerID listener-073fa530f297115f7 
I0729 12:21:11.591106   15487 rule_manager.go:430] ############list rules resp############
I0729 12:21:11.591110   15487 rule_manager.go:431] resp: {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "rule-0a92e60dcd4f3219c",
      IsDefault: true,
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "default",
      Priority: 99999
    }]
}, err: <nil>
I0729 12:21:11.591141   15487 rule_manager.go:443] findMatchingRule: ingnore the default rule {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "rule-0a92e60dcd4f3219c",
  IsDefault: true,
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "default",
  Priority: 99999
}
I0729 12:21:11.591171   15487 rule_manager.go:281] Setting sdk HttpMatch using rule.Spec {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fa800 0xc0007fa840]} 2023-07-29 12:21:10.933402562 +0000 UTC m=+42.159182810}
I0729 12:21:11.591303   15487 cloud.go:30] Request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633270-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}
E0729 12:21:11.642558   15487 request.go:539] Failed request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633270-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}, Error: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "037717a3-fdeb-4be7-a3b9-3ccd7c69f064"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
}
I0729 12:21:11.642578   15487 rule_manager.go:261] ############req creating rule ###########
I0729 12:21:11.642585   15487 rule_manager.go:262] {
  Action: {
    Forward: {
      TargetGroups: [{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        },{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        }]
    }
  },
  ListenerIdentifier: "listener-073fa530f297115f7",
  Match: {
    HttpMatch: {
      PathMatch: {
        Match: {
          Prefix: "/"
        }
      }
    }
  },
  Name: "k8s-1690633270-rule-1",
  Priority: 1,
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}
I0729 12:21:11.642612   15487 rule_manager.go:263] ############resp creating rule ###########, err: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "037717a3-fdeb-4be7-a3b9-3ccd7c69f064"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:21:11.642634   15487 rule_manager.go:264] {

}
I0729 12:21:11.642640   15487 rule_synthesizer.go:39] Failed to create rule &{{0xc000b4aa40 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fa800 0xc0007fa840]} 2023-07-29 12:21:10.933402562 +0000 UTC m=+42.159182810} <nil>}, err :ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "037717a3-fdeb-4be7-a3b9-3ccd7c69f064"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:21:11.642680   15487 httproute_controller.go:230] HTTPRouteReconciler: Failed deploy gargo-20-exv6tcuxxl due to err ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "037717a3-fdeb-4be7-a3b9-3ccd7c69f064"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
HandleReconcileError handle Error ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "037717a3-fdeb-4be7-a3b9-3ccd7c69f064"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:21:11Z	DEBUG	events	retry reconcile...	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Retry-Reconcile"}
2023-07-29T12:21:31Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "80d9659d-29fb-407d-91b2-4c5bd6aa7986"}
I0729 12:21:31.643109   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc000e72a70 0xc000e72a80 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc000e72a90 [] [] <nil>}] [] [{{{0xc000e72ac0 0xc000e72ad0 crown-19-xp02eti5zc 0xc000e72ae0 0xc000a1645c} 0xc000a16470} []} {{{0xc000e72af0 0xc000e72b00 crown-19-xp02eti5zc 0xc000e72b10 0xc000a16474} 0xc000a16478} []}]}]}
2023-07-29T12:21:31Z	INFO	Adding/Updating	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "80d9659d-29fb-407d-91b2-4c5bd6aa7986"}
I0729 12:21:31.643164   15487 httproute_controller.go:251] Beginning -- reconcileHTTPRouteResource, [&{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5020592 1 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc000e72a70 0xc000e72a80 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc000e72a90 [] [] <nil>}] [] [{{{0xc000e72ac0 0xc000e72ad0 crown-19-xp02eti5zc 0xc000e72ae0 0xc000a1645c} 0xc000a16470} []} {{{0xc000e72af0 0xc000e72b00 crown-19-xp02eti5zc 0xc000e72b10 0xc000a16474} 0xc000a16478} []}]}]} {{[]}}}]
I0729 12:21:31.643249   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:21:31.643263   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc000e72dd0 [] [] <nil>}] [] [{{{0xc000e72e00 0xc000e72e10 crown-19-xp02eti5zc 0xc000e72e20 0xc000a164a0} 0xc000a164a4} []} {{{0xc000e72e30 0xc000e72e40 crown-19-xp02eti5zc 0xc000e72e50 0xc000a164a8} 0xc000a164ac} []}]}
I0729 12:21:31.643272   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc000e72e00 0xc000e72e10 crown-19-xp02eti5zc 0xc000e72e20 0xc000a164a0} 0xc000a164a4} []} 
2023-07-29T12:21:31Z	DEBUG	events	Adding/Updating Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Reconcile"}
I0729 12:21:31.643284   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:21:31.643339   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:31.643380   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:21:31.643390   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000bc3b00 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:21:31.643411   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc000e72e30 0xc000e72e40 crown-19-xp02eti5zc 0xc000e72e50 0xc000a164a8} 0xc000a164ac} []} 
I0729 12:21:31.643420   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:21:31.643435   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:31.643447   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:21:31.643465   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000bc3b00 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:21:31.643498   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:21:31.643570   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000c884e0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:31.643586   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:21:31.643592   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000c884e0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:31.643605   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:21:31.643611   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000c884f0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:31.643619   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:21:31.643627   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000c884f0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:31.643637   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:21:31.643642   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:21:31.643659   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:21:31.643698   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000c88840 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:31.643707   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:21:31.643713   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000c88840 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:31.643720   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:21:31.643727   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000c88850 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:31.643735   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:21:31.643745   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000c88850 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:31.643754   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:21:31.643759   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:21:31.643772   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:21:31.643776   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:21:31.643792   15487 model_build_listener.go:115] Building Listener: found matching listner Port 80
I0729 12:21:31.643797   15487 model_build_listener.go:158] listenerResourceName : gargo-20-exv6tcuxxl-non-default-80-HTTP 
I0729 12:21:31.643803   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:21:31.643806   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:21:31.643815   15487 model_build_rule.go:53] Parsing http rule spec: {[{0xc000e72dd0 [] [] <nil>}] [] [{{{0xc000e72e00 0xc000e72e10 crown-19-xp02eti5zc 0xc000e72e20 0xc000a164a0} 0xc000a164a4} []} {{{0xc000e72e30 0xc000e72e40 crown-19-xp02eti5zc 0xc000e72e50 0xc000a164a8} 0xc000a164ac} []}]}
I0729 12:21:31.643827   15487 model_build_rule.go:71] Examing pathmatch type PathPrefix value / for for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:21:31.643832   15487 model_build_rule.go:81] Using PathMatchPathPrefix for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:21:31.643838   15487 model_build_rule.go:133] Generated ruleSpec is: {  0  / false true 0 [{

} {

} {

} {

} {

}]  {[]} 0001-01-01 00:00:00 +0000 UTC}
I0729 12:21:31.643863   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc000e72e00 0xc000e72e10 crown-19-xp02eti5zc 0xc000e72e20 0xc000a164a0} 0xc000a164a4} []}
I0729 12:21:31.643869   15487 model_build_rule.go:139] backendref kind: Service
I0729 12:21:31.643877   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc000e72e30 0xc000e72e40 crown-19-xp02eti5zc 0xc000e72e50 0xc000a164a8} 0xc000a164ac} []}
I0729 12:21:31.643884   15487 model_build_rule.go:139] backendref kind: Service
2023-07-29T12:21:31Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "80d9659d-29fb-407d-91b2-4c5bd6aa7986", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Listener\":{\"gargo-20-exv6tcuxxl-non-default-80-HTTP\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"defaultaction\":{\"isimport\":false,\"backendservicename\":\"crown-19-xp02eti5zc\",\"backendservicenamespace\":\"non-default\"}}}},\"AWS::VPCServiceNetwork::Rule\":{\"rule-1\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"pathmatchvalue\":\"/\",\"pathmatchexact\":false,\"pathmatchprefix\":true,\"numofheadermatches\":0,\"MatchedHeaders\":[{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null}],\"id\":\"rule-1\",\"action\":{\"ruletarget\":[{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1},{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1}]},\"time\":\"2023-07-29T12:21:31.643886937Z\"}}},\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":false}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":false,\"LatticeID\":\"\"}}},\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80},{\"targetID\":\"192.168.60.30\",\"port\":9114},{\"targetID\":\"192.168.60.30\",\"port\":80}]}}}}}": ""}
I0729 12:21:31.643980   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc00051b300]]
I0729 12:21:31.643985   15487 target_group_manager.go:66] Create Target Group API call for name k8s-crown-19-xp02eti5zc-non-default 
I0729 12:21:31.644078   15487 cloud.go:30] Request: VpcLattice/ListTargetGroups, Payload: {}
I0729 12:21:31.697005   15487 cloud.go:38] Response: VpcLattice/ListTargetGroups, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",      CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Id: "tg-04558f110adb72915",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Name: "k8s-crown-19-xp02eti5zc-non-default",      Port: 80,      Protocol: "HTTP",      ServiceArns: [],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-0d3c74aaa93e650b1"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",      CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Id: "tg-0afe8abcd40f467b8",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Name: "k8s-nginx-node-locust",      Port: 80,      Protocol: "HTTP",      ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-04c86859f0f6690b0"    }]}
I0729 12:21:31.697024   15487 target_group_manager.go:285] findTGByName: resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Id: "tg-04558f110adb72915",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Name: "k8s-crown-19-xp02eti5zc-non-default",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: [],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-0d3c74aaa93e650b1"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",
  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Id: "tg-0afe8abcd40f467b8",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Name: "k8s-nginx-node-locust",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-04c86859f0f6690b0"
}] 
I0729 12:21:31.697079   15487 target_group_manager.go:288] targetgroup k8s-crown-19-xp02eti5zc-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915
I0729 12:21:31.697087   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:31.697102   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915]
I0729 12:21:31.697109   15487 target_group_synthesizer.go:399] targetGroup Synthesized successfully for {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false }: {arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915}
I0729 12:21:31.697120   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc00051b300]
I0729 12:21:31.697128   15487 targets_synthesizer.go:35] Synthesize Targets: [0xc000c27290] 
I0729 12:21:31.697135   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc000bc3b00 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}} 
I0729 12:21:31.697226   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:21:31.763074   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [    {      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }  ]}
I0729 12:21:31.763088   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:21:31.763120   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ]
} 
I0729 12:21:31.763237   15487 cloud.go:30] Request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ]}
I0729 12:21:32.024960   15487 cloud.go:38] Response: VpcLattice/RegisterTargets, Body: {  Successful: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ],  Unsuccessful: []}
I0729 12:21:32.024990   15487 targets_manager.go:106] register pod to target group resp[{
  Successful: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ],
  Unsuccessful: []
}]
I0729 12:21:32.025010   15487 targets_manager.go:107] register pod to target group err[<nil>]
I0729 12:21:32.025015   15487 targets_manager.go:118] Targets register successfully
I0729 12:21:32.025024   15487 latticestore.go:479] Success UpdateTarget Group name[k8s-crown-19-xp02eti5zc-non-default]  targetIPList {[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}
I0729 12:21:32.025036   15487 service_synthesizer.go:34] Service-synthesize start: [0xc0005f6370] 
I0729 12:21:32.025041   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc000bc3b00 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc000e72f20] [test-gateway]   false} <nil>}
I0729 12:21:32.025119   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
I0729 12:21:32.073588   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:21:32.073602   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:21:32.073647   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:21:32.073654   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names [test-gateway]
I0729 12:21:32.073739   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0",  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:21:32.127485   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:21:32.127511   15487 service_manager.go:168] ListServiceNetworkServiceAssociationsAsList, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}], err <nil>
I0729 12:21:32.127609   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:32.179219   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:21:32.179244   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}] err <nil>
I0729 12:21:32.179285   15487 latticestore.go:226] AddLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6410] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:32.179303   15487 latticestore.go:236] UpdateLatticeService: name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0]
I0729 12:21:32.179332   15487 service_synthesizer.go:73] Creating Service DNS
I0729 12:21:32.179340   15487 dnsendpoint_manager.go:38] Skipping creation of non-default/gargo-20-exv6tcuxxl-dns: detected no custom domain
I0729 12:21:32.179344   15487 service_synthesizer.go:81] serviceStatus {arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0 svc-031836347e3ec9cc0 gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws}, error = <nil> 
I0729 12:21:32.179350   15487 service_synthesizer.go:85] Service-synthesize end [0xc0005f6370] 
I0729 12:21:32.179358   15487 listener_synthesizer.go:37] Synthesize Listener:  [0xc000c306e0]
I0729 12:21:32.179365   15487 listener_manager.go:39] Creating listener >>>> &{{0xc000bc3b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:32.179377   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc000e93800]}]
I0729 12:21:32.179386   15487 listener_manager.go:160] calling findListenerByNamePort serviceID svc-031836347e3ec9cc0 port 80 
I0729 12:21:32.179466   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:32.223894   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:21:32.223913   15487 listener_manager.go:170] findListenerByNamePort>> output port 80 item: {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} 
I0729 12:21:32.223935   15487 listener_manager.go:172] Listener svc-031836347e3ec9cc0 Port 80 already exists arn: 0xc000da2ab0 
I0729 12:21:32.223941   15487 listener_manager.go:51] findListenerByNamePort &{{0xc000bc3b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} , lisenter {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} error <nil>
I0729 12:21:32.223965   15487 listener_synthesizer.go:48] Success synthesize listern &{{0xc000bc3b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:32.223976   15487 latticestore.go:502] AddListener :{{gargo-20-exv6tcuxxl non-default 80 HTTP} arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7 listener-073fa530f297115f7}, ARN arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7, ID listener-073fa530f297115f7
I0729 12:21:32.223986   15487 listener_synthesizer.go:100] getSDKListeners service: [0xc0005f6370] err: <nil> 
I0729 12:21:32.224001   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:32.224014   15487 listener_manager.go:126] List - defaultListenerManager  serviceID svc-031836347e3ec9cc0 
I0729 12:21:32.224082   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:32.275006   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:21:32.275025   15487 listener_manager.go:139] ############resp list listener ###########
I0729 12:21:32.275031   15487 listener_manager.go:140] {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "listener-073fa530f297115f7",
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "gargo-20-exv6tcuxxl-non-default-80-http",
      Port: 80,
      Protocol: "HTTP"
    }]
}
I0729 12:21:32.275052   15487 listener_synthesizer.go:125] getSDKListeners result >> [0xc0003db7a0]
I0729 12:21:32.275059   15487 listener_synthesizer.go:57] getSDKlistener: [0xc0003db7a0], err: <nil>
I0729 12:21:32.275064   15487 listener_synthesizer.go:86] findMatchListener: found matching moduleListener &{{0xc000bc3b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:32.275077   15487 rule_synthesizer.go:32] Synthesize rule = [0xc00079fe40], err :<nil> 
I0729 12:21:32.275084   15487 rule_manager.go:140] Rule --- Create >>>>>>>>.{{0xc000bc3b00 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fba00 0xc0007fba40]} 2023-07-29 12:21:31.643886937 +0000 UTC m=+62.869667185} <nil>}
I0729 12:21:32.275104   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:32.275125   15487 rule_manager.go:160] Convert rule id rule-1 to priority 1 error: <nil> 
I0729 12:21:32.275200   15487 cloud.go:30] Request: VpcLattice/ListRules, Payload: {  ListenerIdentifier: "listener-073fa530f297115f7",  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:32.330080   15487 cloud.go:38] Response: VpcLattice/ListRules, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "rule-0a92e60dcd4f3219c",      IsDefault: true,      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "default",      Priority: 99999    }]}
I0729 12:21:32.330097   15487 rule_manager.go:427] ############list rules req############
I0729 12:21:32.330102   15487 rule_manager.go:428] rule: &{{0xc000bc3b00 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fba00 0xc0007fba40]} 2023-07-29 12:21:31.643886937 +0000 UTC m=+62.869667185} <nil>} , serviceID: svc-031836347e3ec9cc0, listenerID listener-073fa530f297115f7 
I0729 12:21:32.330131   15487 rule_manager.go:430] ############list rules resp############
I0729 12:21:32.330136   15487 rule_manager.go:431] resp: {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "rule-0a92e60dcd4f3219c",
      IsDefault: true,
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "default",
      Priority: 99999
    }]
}, err: <nil>
I0729 12:21:32.330158   15487 rule_manager.go:443] findMatchingRule: ingnore the default rule {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "rule-0a92e60dcd4f3219c",
  IsDefault: true,
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "default",
  Priority: 99999
}
I0729 12:21:32.330184   15487 rule_manager.go:281] Setting sdk HttpMatch using rule.Spec {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fba00 0xc0007fba40]} 2023-07-29 12:21:31.643886937 +0000 UTC m=+62.869667185}
I0729 12:21:32.330330   15487 cloud.go:30] Request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633291-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}
E0729 12:21:32.384062   15487 request.go:539] Failed request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633291-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}, Error: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7cb8bb14-8ede-465e-a996-3b6ebc452d37"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
}
I0729 12:21:32.384086   15487 rule_manager.go:261] ############req creating rule ###########
I0729 12:21:32.384093   15487 rule_manager.go:262] {
  Action: {
    Forward: {
      TargetGroups: [{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        },{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        }]
    }
  },
  ListenerIdentifier: "listener-073fa530f297115f7",
  Match: {
    HttpMatch: {
      PathMatch: {
        Match: {
          Prefix: "/"
        }
      }
    }
  },
  Name: "k8s-1690633291-rule-1",
  Priority: 1,
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}
I0729 12:21:32.384124   15487 rule_manager.go:263] ############resp creating rule ###########, err: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7cb8bb14-8ede-465e-a996-3b6ebc452d37"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:21:32.384143   15487 rule_manager.go:264] {

}
I0729 12:21:32.384150   15487 rule_synthesizer.go:39] Failed to create rule &{{0xc000bc3b00 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0007fba00 0xc0007fba40]} 2023-07-29 12:21:31.643886937 +0000 UTC m=+62.869667185} <nil>}, err :ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7cb8bb14-8ede-465e-a996-3b6ebc452d37"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:21:32.384194   15487 httproute_controller.go:230] HTTPRouteReconciler: Failed deploy gargo-20-exv6tcuxxl due to err ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7cb8bb14-8ede-465e-a996-3b6ebc452d37"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
HandleReconcileError handle Error ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "7cb8bb14-8ede-465e-a996-3b6ebc452d37"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:21:32Z	DEBUG	events	retry reconcile...	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Retry-Reconcile"}
2023-07-29T12:21:52Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "e715bcba-3ddd-4e70-9e61-1e4baa893e80"}
I0729 12:21:52.384520   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc000a9e9d0 0xc000a9e9e0 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc000a9e9f0 [] [] <nil>}] [] [{{{0xc000a9ea20 0xc000a9ea30 crown-19-xp02eti5zc 0xc000a9ea40 0xc000daead0} 0xc000daead4} []} {{{0xc000a9ea50 0xc000a9ea60 crown-19-xp02eti5zc 0xc000a9ea70 0xc000daead8} 0xc000daeadc} []}]}]}
2023-07-29T12:21:52Z	INFO	Adding/Updating	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "e715bcba-3ddd-4e70-9e61-1e4baa893e80"}
I0729 12:21:52.384574   15487 httproute_controller.go:251] Beginning -- reconcileHTTPRouteResource, [&{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5020592 1 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc000a9e9d0 0xc000a9e9e0 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc000a9e9f0 [] [] <nil>}] [] [{{{0xc000a9ea20 0xc000a9ea30 crown-19-xp02eti5zc 0xc000a9ea40 0xc000daead0} 0xc000daead4} []} {{{0xc000a9ea50 0xc000a9ea60 crown-19-xp02eti5zc 0xc000a9ea70 0xc000daead8} 0xc000daeadc} []}]}]} {{[]}}}]
I0729 12:21:52.384669   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:21:52.384687   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc000a9ed30 [] [] <nil>}] [] [{{{0xc000a9ed60 0xc000a9ed70 crown-19-xp02eti5zc 0xc000a9ed80 0xc000daeb00} 0xc000daeb04} []} {{{0xc000a9ed90 0xc000a9eda0 crown-19-xp02eti5zc 0xc000a9edb0 0xc000daeb08} 0xc000daeb0c} []}]}
I0729 12:21:52.384714   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc000a9ed60 0xc000a9ed70 crown-19-xp02eti5zc 0xc000a9ed80 0xc000daeb00} 0xc000daeb04} []} 
I0729 12:21:52.384725   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:21:52.384749   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:52.384771   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
2023-07-29T12:21:52Z	DEBUG	events	Adding/Updating Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Reconcile"}
I0729 12:21:52.384777   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc0006a6b00 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:21:52.384818   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc000a9ed90 0xc000a9eda0 crown-19-xp02eti5zc 0xc000a9edb0 0xc000daeb08} 0xc000daeb0c} []} 
I0729 12:21:52.384851   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:21:52.384877   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:52.384902   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:21:52.384924   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc0006a6b00 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false } <nil>} 
I0729 12:21:52.384971   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:21:52.385070   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000e0fa90 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:52.385084   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:21:52.385091   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000e0fa90 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:52.385100   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:21:52.385106   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000e0faa0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:52.385114   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:21:52.385119   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000e0faa0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:52.385130   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:21:52.385135   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:21:52.385153   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5020641 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[endpoints.kubernetes.io/last-change-trigger-time:2023-07-29T12:04:31Z] [] [] [{kube-controller-manager Update v1 2023-07-29 12:04:31 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},EndpointAddress{IP:192.168.60.30,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-42-29.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:21:52.385198   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000e0fdf0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:52.385208   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.18.121 9114} ***
I0729 12:21:52.385219   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000e0fdf0 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:52.385229   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.18.121 80} ***
I0729 12:21:52.385236   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000e0fe00 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:21:52.385244   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:80, target:{192.168.60.30 9114} ***
I0729 12:21:52.385249   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.60.30  0xc000e0fe00 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-2hq62,UID:cd2852f7-915b-4f03-a6cb-d70c9eb67d48,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:21:52.385257   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:80, target:{192.168.60.30 80} ***
I0729 12:21:52.385264   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]]
I0729 12:21:52.385278   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:21:52.385282   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:21:52.385300   15487 model_build_listener.go:115] Building Listener: found matching listner Port 80
I0729 12:21:52.385313   15487 model_build_listener.go:158] listenerResourceName : gargo-20-exv6tcuxxl-non-default-80-HTTP 
I0729 12:21:52.385320   15487 model_build_listener.go:29] Building Listener for HTTPRoute Name gargo-20-exv6tcuxxl NameSpace non-default
I0729 12:21:52.385323   15487 model_build_listener.go:34] build Listener, Parent Name test-gateway Namespace non-default
I0729 12:21:52.385334   15487 model_build_rule.go:53] Parsing http rule spec: {[{0xc000a9ed30 [] [] <nil>}] [] [{{{0xc000a9ed60 0xc000a9ed70 crown-19-xp02eti5zc 0xc000a9ed80 0xc000daeb00} 0xc000daeb04} []} {{{0xc000a9ed90 0xc000a9eda0 crown-19-xp02eti5zc 0xc000a9edb0 0xc000daeb08} 0xc000daeb0c} []}]}
I0729 12:21:52.385353   15487 model_build_rule.go:71] Examing pathmatch type PathPrefix value / for for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:21:52.385360   15487 model_build_rule.go:81] Using PathMatchPathPrefix for httproute gargo-20-exv6tcuxxl namespace non-default 
I0729 12:21:52.385366   15487 model_build_rule.go:133] Generated ruleSpec is: {  0  / false true 0 [{

} {

} {

} {

} {

}]  {[]} 0001-01-01 00:00:00 +0000 UTC}
I0729 12:21:52.385401   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc000a9ed60 0xc000a9ed70 crown-19-xp02eti5zc 0xc000a9ed80 0xc000daeb00} 0xc000daeb04} []}
I0729 12:21:52.385408   15487 model_build_rule.go:139] backendref kind: Service
I0729 12:21:52.385415   15487 model_build_rule.go:138] buildRoutingPolicy - examing backendRef {{{0xc000a9ed90 0xc000a9eda0 crown-19-xp02eti5zc 0xc000a9edb0 0xc000daeb08} 0xc000daeb0c} []}
I0729 12:21:52.385422   15487 model_build_rule.go:139] backendref kind: Service
2023-07-29T12:21:52Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "e715bcba-3ddd-4e70-9e61-1e4baa893e80", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Listener\":{\"gargo-20-exv6tcuxxl-non-default-80-HTTP\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"defaultaction\":{\"isimport\":false,\"backendservicename\":\"crown-19-xp02eti5zc\",\"backendservicenamespace\":\"non-default\"}}}},\"AWS::VPCServiceNetwork::Rule\":{\"rule-1\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"port\":80,\"protocol\":\"HTTP\",\"pathmatchvalue\":\"/\",\"pathmatchexact\":false,\"pathmatchprefix\":true,\"numofheadermatches\":0,\"MatchedHeaders\":[{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null},{\"CaseSensitive\":null,\"Match\":null,\"Name\":null}],\"id\":\"rule-1\",\"action\":{\"ruletarget\":[{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1},{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"isServiceImport\":false,\"weight\":1}]},\"time\":\"2023-07-29T12:21:52.385424982Z\"}}},\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":false}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":false,\"LatticeID\":\"\"}}},\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80},{\"targetID\":\"192.168.60.30\",\"port\":9114},{\"targetID\":\"192.168.60.30\",\"port\":80}]}}}}}": ""}
I0729 12:21:52.385518   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc000e20200]]
I0729 12:21:52.385524   15487 target_group_manager.go:66] Create Target Group API call for name k8s-crown-19-xp02eti5zc-non-default 
I0729 12:21:52.385619   15487 cloud.go:30] Request: VpcLattice/ListTargetGroups, Payload: {}
I0729 12:21:52.438727   15487 cloud.go:38] Response: VpcLattice/ListTargetGroups, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",      CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Id: "tg-04558f110adb72915",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Name: "k8s-crown-19-xp02eti5zc-non-default",      Port: 80,      Protocol: "HTTP",      ServiceArns: [],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-0d3c74aaa93e650b1"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",      CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Id: "tg-0afe8abcd40f467b8",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Name: "k8s-nginx-node-locust",      Port: 80,      Protocol: "HTTP",      ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-04c86859f0f6690b0"    }]}
I0729 12:21:52.438747   15487 target_group_manager.go:285] findTGByName: resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Id: "tg-04558f110adb72915",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Name: "k8s-crown-19-xp02eti5zc-non-default",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: [],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-0d3c74aaa93e650b1"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",
  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Id: "tg-0afe8abcd40f467b8",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Name: "k8s-nginx-node-locust",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-04c86859f0f6690b0"
}] 
I0729 12:21:52.438802   15487 target_group_manager.go:288] targetgroup k8s-crown-19-xp02eti5zc-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915
I0729 12:21:52.438808   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:52.438820   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[vpc-0d3c74aaa93e650b1] arn[arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915]
I0729 12:21:52.438827   15487 target_group_synthesizer.go:399] targetGroup Synthesized successfully for {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP false }: {arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915}
I0729 12:21:52.438839   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc000e20200]
I0729 12:21:52.438846   15487 targets_synthesizer.go:35] Synthesize Targets: [0xc000b5ef30] 
I0729 12:21:52.438852   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc0006a6b00 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}} 
I0729 12:21:52.438940   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:21:52.493295   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [    {      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }  ]}
I0729 12:21:52.493311   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:21:52.493346   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ]
} 
I0729 12:21:52.493467   15487 cloud.go:30] Request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ]}
I0729 12:21:52.739083   15487 cloud.go:38] Response: VpcLattice/RegisterTargets, Body: {  Successful: [    {      Id: "192.168.18.121",      Port: 9114    },    {      Id: "192.168.18.121",      Port: 80    },    {      Id: "192.168.60.30",      Port: 9114    },    {      Id: "192.168.60.30",      Port: 80    }  ],  Unsuccessful: []}
I0729 12:21:52.739106   15487 targets_manager.go:106] register pod to target group resp[{
  Successful: [
    {
      Id: "192.168.18.121",
      Port: 9114
    },
    {
      Id: "192.168.18.121",
      Port: 80
    },
    {
      Id: "192.168.60.30",
      Port: 9114
    },
    {
      Id: "192.168.60.30",
      Port: 80
    }
  ],
  Unsuccessful: []
}]
I0729 12:21:52.739127   15487 targets_manager.go:107] register pod to target group err[<nil>]
I0729 12:21:52.739132   15487 targets_manager.go:118] Targets register successfully
I0729 12:21:52.739141   15487 latticestore.go:479] Success UpdateTarget Group name[k8s-crown-19-xp02eti5zc-non-default]  targetIPList {[{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}]}
I0729 12:21:52.739154   15487 service_synthesizer.go:34] Service-synthesize start: [0xc0005f6630] 
I0729 12:21:52.739158   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc0006a6b00 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc000a9ee80] [test-gateway]   false} <nil>}
I0729 12:21:52.739233   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
I0729 12:21:52.787149   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:21:52.787166   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:21:52.787213   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:21:52.787220   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names [test-gateway]
I0729 12:21:52.787297   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0",  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:21:52.840568   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:21:52.840582   15487 service_manager.go:168] ListServiceNetworkServiceAssociationsAsList, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}], err <nil>
I0729 12:21:52.840678   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:52.894738   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:21:52.894759   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}] err <nil>
I0729 12:21:52.894817   15487 latticestore.go:226] AddLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d6dc0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:52.894831   15487 latticestore.go:236] UpdateLatticeService: name[gargo-20-exv6tcuxxl] namespace[non-default] arn[arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0]
I0729 12:21:52.894837   15487 service_synthesizer.go:73] Creating Service DNS
I0729 12:21:52.894846   15487 dnsendpoint_manager.go:38] Skipping creation of non-default/gargo-20-exv6tcuxxl-dns: detected no custom domain
I0729 12:21:52.894850   15487 service_synthesizer.go:81] serviceStatus {arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0 svc-031836347e3ec9cc0 gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws}, error = <nil> 
I0729 12:21:52.894856   15487 service_synthesizer.go:85] Service-synthesize end [0xc0005f6630] 
I0729 12:21:52.894866   15487 listener_synthesizer.go:37] Synthesize Listener:  [0xc000c30be0]
I0729 12:21:52.894871   15487 listener_manager.go:39] Creating listener >>>> &{{0xc0006a6b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:52.894883   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc00070bf80]}]
I0729 12:21:52.894892   15487 listener_manager.go:160] calling findListenerByNamePort serviceID svc-031836347e3ec9cc0 port 80 
I0729 12:21:52.894963   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:52.949563   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:21:52.949581   15487 listener_manager.go:170] findListenerByNamePort>> output port 80 item: {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} 
I0729 12:21:52.949602   15487 listener_manager.go:172] Listener svc-031836347e3ec9cc0 Port 80 already exists arn: 0xc000ea3270 
I0729 12:21:52.949610   15487 listener_manager.go:51] findListenerByNamePort &{{0xc0006a6b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} , lisenter {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "listener-073fa530f297115f7",
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default-80-http",
  Port: 80,
  Protocol: "HTTP"
} error <nil>
I0729 12:21:52.949651   15487 listener_synthesizer.go:48] Success synthesize listern &{{0xc0006a6b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:52.949662   15487 latticestore.go:502] AddListener :{{gargo-20-exv6tcuxxl non-default 80 HTTP} arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7 listener-073fa530f297115f7}, ARN arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7, ID listener-073fa530f297115f7
I0729 12:21:52.949672   15487 listener_synthesizer.go:100] getSDKListeners service: [0xc0005f6630] err: <nil> 
I0729 12:21:52.949678   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc0000b9b00]}]
I0729 12:21:52.949692   15487 listener_manager.go:126] List - defaultListenerManager  serviceID svc-031836347e3ec9cc0 
I0729 12:21:52.949763   15487 cloud.go:30] Request: VpcLattice/ListListeners, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:52.993264   15487 cloud.go:38] Response: VpcLattice/ListListeners, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "listener-073fa530f297115f7",      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default-80-http",      Port: 80,      Protocol: "HTTP"    }]}
I0729 12:21:52.993282   15487 listener_manager.go:139] ############resp list listener ###########
I0729 12:21:52.993287   15487 listener_manager.go:140] {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "listener-073fa530f297115f7",
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "gargo-20-exv6tcuxxl-non-default-80-http",
      Port: 80,
      Protocol: "HTTP"
    }]
}
I0729 12:21:52.993309   15487 listener_synthesizer.go:125] getSDKListeners result >> [0xc00039a000]
I0729 12:21:52.993315   15487 listener_synthesizer.go:57] getSDKlistener: [0xc00039a000], err: <nil>
I0729 12:21:52.993320   15487 listener_synthesizer.go:86] findMatchListener: found matching moduleListener &{{0xc0006a6b00 AWS::VPCServiceNetwork::Listener gargo-20-exv6tcuxxl-non-default-80-HTTP} {gargo-20-exv6tcuxxl non-default 80 HTTP {false crown-19-xp02eti5zc non-default}} <nil>} 
I0729 12:21:52.993332   15487 rule_synthesizer.go:32] Synthesize rule = [0xc0006acc60], err :<nil> 
I0729 12:21:52.993339   15487 rule_manager.go:140] Rule --- Create >>>>>>>>.{{0xc0006a6b00 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0004ece80 0xc0004ecec0]} 2023-07-29 12:21:52.385424982 +0000 UTC m=+83.611205234} <nil>}
I0729 12:21:52.993356   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc0000b9b00]}]
I0729 12:21:52.993373   15487 rule_manager.go:160] Convert rule id rule-1 to priority 1 error: <nil> 
I0729 12:21:52.993451   15487 cloud.go:30] Request: VpcLattice/ListRules, Payload: {  ListenerIdentifier: "listener-073fa530f297115f7",  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:21:53.049214   15487 cloud.go:38] Response: VpcLattice/ListRules, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Id: "rule-0a92e60dcd4f3219c",      IsDefault: true,      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,      Name: "default",      Priority: 99999    }]}
I0729 12:21:53.049233   15487 rule_manager.go:427] ############list rules req############
I0729 12:21:53.049239   15487 rule_manager.go:428] rule: &{{0xc0006a6b00 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0004ece80 0xc0004ecec0]} 2023-07-29 12:21:52.385424982 +0000 UTC m=+83.611205234} <nil>} , serviceID: svc-031836347e3ec9cc0, listenerID listener-073fa530f297115f7 
I0729 12:21:53.049262   15487 rule_manager.go:430] ############list rules resp############
I0729 12:21:53.049266   15487 rule_manager.go:431] resp: {
  Items: [{
      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
      CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Id: "rule-0a92e60dcd4f3219c",
      IsDefault: true,
      LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
      Name: "default",
      Priority: 99999
    }]
}, err: <nil>
I0729 12:21:53.049288   15487 rule_manager.go:443] findMatchingRule: ingnore the default rule {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0/listener/listener-073fa530f297115f7/rule/rule-0a92e60dcd4f3219c",
  CreatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Id: "rule-0a92e60dcd4f3219c",
  IsDefault: true,
  LastUpdatedAt: 2023-07-29 12:20:29.746 +0000 UTC,
  Name: "default",
  Priority: 99999
}
I0729 12:21:53.049312   15487 rule_manager.go:281] Setting sdk HttpMatch using rule.Spec {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0004ece80 0xc0004ecec0]} 2023-07-29 12:21:52.385424982 +0000 UTC m=+83.611205234}
I0729 12:21:53.049450   15487 cloud.go:30] Request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633312-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}
E0729 12:21:53.104522   15487 request.go:539] Failed request: VpcLattice/CreateRule, Payload: {  Action: {    Forward: {      TargetGroups: [{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        },{          TargetGroupIdentifier: "tg-04558f110adb72915",          Weight: 1        }]    }  },  ListenerIdentifier: "listener-073fa530f297115f7",  Match: {    HttpMatch: {      PathMatch: {        Match: {          Prefix: "/"        }      }    }  },  Name: "k8s-1690633312-rule-1",  Priority: 1,  ServiceIdentifier: "svc-031836347e3ec9cc0"}, Error: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "bc683111-33d8-43ca-b6ec-89c184af1616"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
}
I0729 12:21:53.104541   15487 rule_manager.go:261] ############req creating rule ###########
I0729 12:21:53.104547   15487 rule_manager.go:262] {
  Action: {
    Forward: {
      TargetGroups: [{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        },{
          TargetGroupIdentifier: "tg-04558f110adb72915",
          Weight: 1
        }]
    }
  },
  ListenerIdentifier: "listener-073fa530f297115f7",
  Match: {
    HttpMatch: {
      PathMatch: {
        Match: {
          Prefix: "/"
        }
      }
    }
  },
  Name: "k8s-1690633312-rule-1",
  Priority: 1,
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}
I0729 12:21:53.104587   15487 rule_manager.go:263] ############resp creating rule ###########, err: ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "bc683111-33d8-43ca-b6ec-89c184af1616"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:21:53.104605   15487 rule_manager.go:264] {

}
I0729 12:21:53.104613   15487 rule_synthesizer.go:39] Failed to create rule &{{0xc0006a6b00 AWS::VPCServiceNetwork::Rule rule-1} {gargo-20-exv6tcuxxl non-default 80 HTTP / false true 0 [{

} {

} {

} {

} {

}] rule-1 {[0xc0004ece80 0xc0004ecec0]} 2023-07-29 12:21:52.385424982 +0000 UTC m=+83.611205234} <nil>}, err :ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "bc683111-33d8-43ca-b6ec-89c184af1616"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
I0729 12:21:53.104650   15487 httproute_controller.go:230] HTTPRouteReconciler: Failed deploy gargo-20-exv6tcuxxl due to err ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "bc683111-33d8-43ca-b6ec-89c184af1616"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
HandleReconcileError handle Error ValidationException: Target groups must be distinct.
{
  RespMetadata: {
    StatusCode: 400,
    RequestID: "bc683111-33d8-43ca-b6ec-89c184af1616"
  },
  FieldList: [{
      Message: "Target groups must be distinct.",
      Name: "targetGroups"
    }],
  Message_: "Target groups must be distinct.",
  Reason: "fieldValidationFailed"
} 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:21:53Z	DEBUG	events	retry reconcile...	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5020592"}, "reason": "Retry-Reconcile"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2hq62","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2hq62", "reconcileID": "5938dbda-f070-4033-9346-0d9c88c1663a"}
I0729 12:22:02.068368   15487 endpoints.go:36] Event: endpoints update
I0729 12:22:02.068418   15487 endpoints.go:56] Event: enqueueImpactedService [&Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5023091 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [] [{kube-controller-manager Update v1 2023-07-29 12:22:02 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},}]
I0729 12:22:02.068503   15487 endpoints.go:87] Finished enqueueImpactedService [&Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5023091 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [] [{kube-controller-manager Update v1 2023-07-29 12:22:02 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},}] targetIPLIST[[192.168.18.121]]
2023-07-29T12:22:02Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "0759cefe-a00c-4e1e-83f0-f28fea32d1d0"}
I0729 12:22:02.068606   15487 service_controller.go:130] endpoints change trigger target IP list registration k8s-crown-19-xp02eti5zc-non-default and tg {{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false} arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915 [{192.168.18.121 9114} {192.168.18.121 80} {192.168.60.30 9114} {192.168.60.30 80}] vpc-0d3c74aaa93e650b1 false true}
I0729 12:22:02.068643   15487 model_build_targets.go:156] Build Targets:  endPoints &Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5023091 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [] [{kube-controller-manager Update v1 2023-07-29 12:22:02 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:subsets":{}} }]},Subsets:[]EndpointSubset{EndpointSubset{Addresses:[]EndpointAddress{EndpointAddress{IP:192.168.18.121,TargetRef:&ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,},Hostname:,NodeName:*ip-192-168-26-174.us-west-2.compute.internal,},},NotReadyAddresses:[]EndpointAddress{},Ports:[]EndpointPort{EndpointPort{Name:http-prometheus,Port:9114,Protocol:TCP,AppProtocol:nil,},EndpointPort{Name:port-test,Port:80,Protocol:TCP,AppProtocol:nil,},},},},} 
I0729 12:22:02.068691   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000898150 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {http-prometheus 9114 TCP <nil>}
I0729 12:22:02.068702   15487 model_build_targets.go:168] Found a port match, registering the target - port:9114, containerPort:0, target:{192.168.18.121 9114} ***
I0729 12:22:02.068710   15487 model_build_targets.go:161] serviceReconcile-endpoints: address {192.168.18.121  0xc000898150 &ObjectReference{Kind:Pod,Namespace:non-default,Name:snarl-18-6nas3pdvrz-5666756898-ntcm4,UID:3f5a957b-9de5-4aeb-bece-a039e93b5a93,APIVersion:,ResourceVersion:,FieldPath:,}}, port {port-test 80 TCP <nil>}
I0729 12:22:02.068718   15487 model_build_targets.go:168] Found a port match, registering the target - port:80, containerPort:0, target:{192.168.18.121 80} ***
I0729 12:22:02.068723   15487 model_build_targets.go:177] Build Targets--- targetIPList [[{192.168.18.121 9114} {192.168.18.121 80}]]
2023-07-29T12:22:02Z	INFO	Successfully built model	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "0759cefe-a00c-4e1e-83f0-f28fea32d1d0", "{\"id\":\"non-default/crown-19-xp02eti5zc\",\"resources\":{\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":[{\"targetID\":\"192.168.18.121\",\"port\":9114},{\"targetID\":\"192.168.18.121\",\"port\":80}]}}}}}": ""}
I0729 12:22:02.068762   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc0006a7f00 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  [{192.168.18.121 9114} {192.168.18.121 80}]}} 
I0729 12:22:02.068882   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-ntcm4","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-ntcm4", "reconcileID": "205b50d8-2d63-4bb7-acb2-b0076afdecd3"}
I0729 12:22:02.083026   15487 endpoints.go:36] Event: endpoints update
I0729 12:22:02.083043   15487 endpoints.go:56] Event: enqueueImpactedService [&Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5023096 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [] [{kube-controller-manager Update v1 2023-07-29 12:22:02 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}}} }]},Subsets:[]EndpointSubset{},}]
I0729 12:22:02.083098   15487 endpoints.go:87] Finished enqueueImpactedService [&Endpoints{ObjectMeta:{crown-19-xp02eti5zc  non-default  49a4855d-bb06-41fd-9b6f-51c31b78fc01 5023096 0 2023-07-29 12:04:28 +0000 UTC <nil> <nil> map[testing.kubernetes.io:true] map[] [] [] [{kube-controller-manager Update v1 2023-07-29 12:22:02 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}}} }]},Subsets:[]EndpointSubset{},}] targetIPLIST[[]]
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "756cdf9d-b90e-4e94-a3ca-f9d74535666f"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "6fc0041f-edce-43e6-8526-a97dadfb15bf"}
I0729 12:22:02.134270   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [    {      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },    {      Id: "192.168.60.30",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }  ]}
I0729 12:22:02.134287   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.60.30",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:22:02.134419   15487 cloud.go:30] Request: VpcLattice/DeregisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [{      Id: "192.168.60.30",      Port: 9114    },{      Id: "192.168.60.30",      Port: 80    }]}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "c086812c-5e7c-44e0-82d4-70e8501bd89f"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "2030144b-ea3e-4488-9d4b-b229379cbb5f"}
I0729 12:22:02.221749   15487 cloud.go:38] Response: VpcLattice/DeregisterTargets, Body: {  Successful: [{      Id: "192.168.60.30",      Port: 9114    },{      Id: "192.168.60.30",      Port: 80    }],  Unsuccessful: []}
I0729 12:22:02.221766   15487 targets_manager.go:85] TargetManager-Create, deregister deleted targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [{
      Id: "192.168.60.30",
      Port: 9114
    },{
      Id: "192.168.60.30",
      Port: 80
    }]
}, output {
  Successful: [{
      Id: "192.168.60.30",
      Port: 9114
    },{
      Id: "192.168.60.30",
      Port: 80
    }],
  Unsuccessful: []
}, err <nil>
I0729 12:22:02.221801   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [{
      Id: "192.168.18.121",
      Port: 9114
    },{
      Id: "192.168.18.121",
      Port: 80
    }]
} 
I0729 12:22:02.221903   15487 cloud.go:30] Request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [{      Id: "192.168.18.121",      Port: 9114    },{      Id: "192.168.18.121",      Port: 80    }]}
I0729 12:22:02.499620   15487 cloud.go:38] Response: VpcLattice/RegisterTargets, Body: {  Successful: [{      Id: "192.168.18.121",      Port: 9114    },{      Id: "192.168.18.121",      Port: 80    }],  Unsuccessful: []}
I0729 12:22:02.499642   15487 targets_manager.go:106] register pod to target group resp[{
  Successful: [{
      Id: "192.168.18.121",
      Port: 9114
    },{
      Id: "192.168.18.121",
      Port: 80
    }],
  Unsuccessful: []
}]
I0729 12:22:02.499658   15487 targets_manager.go:107] register pod to target group err[<nil>]
I0729 12:22:02.499664   15487 targets_manager.go:118] Targets register successfully
I0729 12:22:02.499673   15487 latticestore.go:479] Success UpdateTarget Group name[k8s-crown-19-xp02eti5zc-non-default]  targetIPList {[]}
2023-07-29T12:22:02Z	INFO	Successfully deployed model	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "0759cefe-a00c-4e1e-83f0-f28fea32d1d0"}
2023-07-29T12:22:02Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "3c6c9c6e-6100-4971-88fc-59be46a7cbb1"}
I0729 12:22:02.499768   15487 service_controller.go:115] service deletion trigger target IP list registration k8s-crown-19-xp02eti5zc-non-default and tg {{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false} arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915 tg-04558f110adb72915 [] vpc-0d3c74aaa93e650b1 false true}
I0729 12:22:02.499801   15487 model_build_targets.go:177] Build Targets--- targetIPList [[]]
2023-07-29T12:22:02Z	INFO	Successfully built model	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "3c6c9c6e-6100-4971-88fc-59be46a7cbb1", "{\"id\":\"non-default/crown-19-xp02eti5zc\",\"resources\":{\"AWS:VPCServiceNetwork::Targets\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"name\":\"crown-19-xp02eti5zc\",\"namespace\":\"non-default\",\"routename\":\"gargo-20-exv6tcuxxl\",\"targetgroupID\":\"\",\"targetIPlist\":null}}}}}": ""}
I0729 12:22:02.499848   15487 targets_manager.go:40] Update Lattice targets API call for &{{0xc0006d7e80 AWS:VPCServiceNetwork::Targets k8s-crown-19-xp02eti5zc-non-default} {crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl  []}} 
I0729 12:22:02.499945   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:22:02.551976   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: [{      Id: "192.168.18.121",      Port: 80,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    },{      Id: "192.168.18.121",      Port: 9114,      ReasonCode: "TargetGroupNotInUse",      Status: "UNUSED"    }]}
I0729 12:22:02.551995   15487 targets_manager.go:58] TargetsManager-Create, listTargetsOutput [{
  Id: "192.168.18.121",
  Port: 80,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
} {
  Id: "192.168.18.121",
  Port: 9114,
  ReasonCode: "TargetGroupNotInUse",
  Status: "UNUSED"
}], err <nil> 
I0729 12:22:02.552100   15487 cloud.go:30] Request: VpcLattice/DeregisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915",  Targets: [{      Id: "192.168.18.121",      Port: 80    },{      Id: "192.168.18.121",      Port: 9114    }]}
I0729 12:22:02.614122   15487 cloud.go:38] Response: VpcLattice/DeregisterTargets, Body: {  Successful: [{      Id: "192.168.18.121",      Port: 80    },{      Id: "192.168.18.121",      Port: 9114    }],  Unsuccessful: []}
I0729 12:22:02.614136   15487 targets_manager.go:85] TargetManager-Create, deregister deleted targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915",
  Targets: [{
      Id: "192.168.18.121",
      Port: 80
    },{
      Id: "192.168.18.121",
      Port: 9114
    }]
}, output {
  Successful: [{
      Id: "192.168.18.121",
      Port: 80
    },{
      Id: "192.168.18.121",
      Port: 9114
    }],
  Unsuccessful: []
}, err <nil>
I0729 12:22:02.614170   15487 targets_manager.go:103] Calling Lattice API register targets input {
  TargetGroupIdentifier: "tg-04558f110adb72915"
} 
E0729 12:22:02.614200   15487 request.go:539] Failed request: VpcLattice/RegisterTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}, Error: InvalidParameter: 1 validation error(s) found.
- missing required field, RegisterTargetsInput.Targets.
I0729 12:22:02.614209   15487 targets_manager.go:106] register pod to target group resp[{

}]
I0729 12:22:02.614215   15487 targets_manager.go:107] register pod to target group err[InvalidParameter: 1 validation error(s) found.
- missing required field, RegisterTargetsInput.Targets.
]
I0729 12:22:02.614223   15487 targets_manager.go:109] Fail to register target err[InvalidParameter: 1 validation error(s) found.
- missing required field, RegisterTargetsInput.Targets.
]
2023-07-29T12:22:02Z	INFO	Successfully deployed model	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "3c6c9c6e-6100-4971-88fc-59be46a7cbb1"}
I0729 12:22:02.624671   15487 service.go:42] Event: service delete
I0729 12:22:02.624686   15487 service.go:53] Event: enqueueImpactedService: &Service{ObjectMeta:{crown-19-xp02eti5zc  non-default  d89085e7-0917-442f-acc1-6636d0a6530f 5023110 0 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:02 +0000 UTC 0xc000c0fac0 map[testing.kubernetes.io:true] map[] [] [service.ki8s.aws/resources] [{integration.test Update v1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":9114,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} } {main Update v1 2023-07-29 12:04:30 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"service.ki8s.aws/resources\"":{}}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:port-test,Protocol:TCP,Port:80,TargetPort:{0 80 },NodePort:0,AppProtocol:nil,},ServicePort{Name:http-prometheus,Protocol:TCP,Port:9114,TargetPort:{0 9114 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: port-test,},ClusterIP:10.100.105.92,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.105.92],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:22:02.624773   15487 service.go:62] Event: enqueueImpactedService, service not found Service "crown-19-xp02eti5zc" not found
I0729 12:22:02.624696   15487 service.go:119] Event: enqueueImpactedHTTPRoute: &Service{ObjectMeta:{crown-19-xp02eti5zc  non-default  d89085e7-0917-442f-acc1-6636d0a6530f 5023110 0 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:02 +0000 UTC 0xc000c0fac0 map[testing.kubernetes.io:true] map[] [] [service.ki8s.aws/resources] [{integration.test Update v1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":9114,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} } {main Update v1 2023-07-29 12:04:30 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"service.ki8s.aws/resources\"":{}}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:port-test,Protocol:TCP,Port:80,TargetPort:{0 80 },NodePort:0,AppProtocol:nil,},ServicePort{Name:http-prometheus,Protocol:TCP,Port:9114,TargetPort:{0 9114 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: port-test,},ClusterIP:10.100.105.92,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.105.92],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:22:02.624778   15487 service.go:73] Event: enqueueImpactedServiceExport: &Service{ObjectMeta:{crown-19-xp02eti5zc  non-default  d89085e7-0917-442f-acc1-6636d0a6530f 5023110 0 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:02 +0000 UTC 0xc000c0fac0 map[testing.kubernetes.io:true] map[] [] [service.ki8s.aws/resources] [{integration.test Update v1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":9114,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}} } {main Update v1 2023-07-29 12:04:30 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"service.ki8s.aws/resources\"":{}}}} }]},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:port-test,Protocol:TCP,Port:80,TargetPort:{0 80 },NodePort:0,AppProtocol:nil,},ServicePort{Name:http-prometheus,Protocol:TCP,Port:9114,TargetPort:{0 9114 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: port-test,},ClusterIP:10.100.105.92,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamilyPolicy:*SingleStack,ClusterIPs:[10.100.105.92],IPFamilies:[IPv4],AllocateLoadBalancerNodePorts:nil,LoadBalancerClass:nil,InternalTrafficPolicy:*Cluster,},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},Conditions:[]Condition{},},}
I0729 12:22:02.624820   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:22:02.624823   15487 service.go:82] Event: enqueueImpactedServiceExport, serviceexport not found ServiceExport.multicluster.x-k8s.io "crown-19-xp02eti5zc" not found
I0729 12:22:02.624826   15487 service.go:147] isServiceUsedByHTTPRoute: kind Service
I0729 12:22:02.633110   15487 endpoints.go:47] Event: endpoints delete
2023-07-29T12:22:02Z	INFO	ServiceReconciler	{"controller": "service", "controllerGroup": "", "controllerKind": "Service", "Service": {"name":"crown-19-xp02eti5zc","namespace":"non-default"}, "namespace": "non-default", "name": "crown-19-xp02eti5zc", "reconcileID": "bfef5c1b-2cbd-4a36-a970-9dcccef8f2fd"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2hq62","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2hq62", "reconcileID": "9f47da6f-3648-4e8d-9b14-b3fdc51d12e9"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2hq62","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2hq62", "reconcileID": "58ed39e4-b393-4de8-89ce-72a7b8ed464f"}
2023-07-29T12:22:02Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2hq62","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2hq62", "reconcileID": "323d0401-3212-4469-93a6-8686e220de46"}
2023-07-29T12:22:03Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-ntcm4","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-ntcm4", "reconcileID": "d5d1aa00-2e20-4ae6-a4de-1665215f374c"}
2023-07-29T12:22:03Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-ntcm4","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-ntcm4", "reconcileID": "e7da207d-3e99-4e2c-ae90-652a956bc3f8"}
2023-07-29T12:22:03Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-ntcm4","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-ntcm4", "reconcileID": "4478cab0-ba60-44aa-9330-679a26cea954"}
I0729 12:22:03.629495   15487 httproute.go:38] HTTPRoute update 
2023-07-29T12:22:03Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "995edbab-4725-4fc3-b7fd-7db347c23680"}
I0729 12:22:03.629683   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc00064ba50 0xc00064ba60 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc00064ba70 [] [] <nil>}] [] [{{{0xc00064baa0 0xc00064bab0 crown-19-xp02eti5zc 0xc00064bac0 0xc00012c848} 0xc00012c84c} []} {{{0xc00064bad0 0xc00064bae0 crown-19-xp02eti5zc 0xc00064baf0 0xc00012c870} 0xc00012c874} []}]}]}
2023-07-29T12:22:03Z	INFO	Deleting	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "995edbab-4725-4fc3-b7fd-7db347c23680"}
I0729 12:22:03.629737   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:22:03.629747   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc00064ba70 [] [] <nil>}] [] [{{{0xc00064baa0 0xc00064bab0 crown-19-xp02eti5zc 0xc00064bac0 0xc00012c848} 0xc00012c84c} []} {{{0xc00064bad0 0xc00064bae0 crown-19-xp02eti5zc 0xc00064baf0 0xc00012c870} 0xc00012c874} []}]}
I0729 12:22:03.629755   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc00064baa0 0xc00064bab0 crown-19-xp02eti5zc 0xc00064bac0 0xc00012c848} 0xc00012c84c} []} 
I0729 12:22:03.629765   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:22:03.629777   15487 model_build_targetgroup.go:339] Error finding backend service non-default/crown-19-xp02eti5zc error :Service "crown-19-xp02eti5zc" not found 
I0729 12:22:03.629785   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc0000b9b00]}]
I0729 12:22:03.629801   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:22:03.629808   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000d41ac0 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>} 
I0729 12:22:03.629821   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc00064bad0 0xc00064bae0 crown-19-xp02eti5zc 0xc00064baf0 0xc00012c870} 0xc00012c874} []} 
I0729 12:22:03.629826   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:22:03.629832   15487 model_build_targetgroup.go:339] Error finding backend service non-default/crown-19-xp02eti5zc error :Service "crown-19-xp02eti5zc" not found 
2023-07-29T12:22:03Z	DEBUG	events	Deleting Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5023129"}, "reason": "Reconcile"}
I0729 12:22:03.629836   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc0000b9b00]}]
I0729 12:22:03.629868   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:22:03.629897   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc000d41ac0 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>} 
I0729 12:22:03.629919   15487 model_build_lattice_service.go:87] latticeServiceModelBuildTask: for delete ignore Targets, policy &{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5023129 2 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:03 +0000 UTC 0xc00012c840 map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc00064ba50 0xc00064ba60 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc00064ba70 [] [] <nil>}] [] [{{{0xc00064baa0 0xc00064bab0 crown-19-xp02eti5zc 0xc00064bac0 0xc00012c848} 0xc00012c84c} []} {{{0xc00064bad0 0xc00064bae0 crown-19-xp02eti5zc 0xc00064baf0 0xc00012c870} 0xc00012c874} []}]}]} {{[]}}}
2023-07-29T12:22:03Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "995edbab-4725-4fc3-b7fd-7db347c23680", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":true}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":true,\"LatticeID\":\"tg-04558f110adb72915\"}}}}}": ""}
I0729 12:22:03.630018   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc00057d700]]
I0729 12:22:03.630024   15487 target_group_synthesizer.go:370] In the SynthesizeTriggeredTargetGroupsCreation(), we only handle TG Creation request and skip any deletion request [&{{0xc000d41ac0 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>}] 
I0729 12:22:03.630034   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc00057d700]
I0729 12:22:03.630039   15487 targets_synthesizer.go:35] Synthesize Targets: [] 
I0729 12:22:03.630045   15487 service_synthesizer.go:34] Service-synthesize start: [0xc000d1e370] 
I0729 12:22:03.630048   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc000d41ac0 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc00064bbd0] [test-gateway]   true} <nil>}
I0729 12:22:03.630137   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
I0729 12:22:03.674385   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:22:03.674410   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:22:03.674448   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:22:03.674453   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names []
I0729 12:22:03.674528   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:22:03.731284   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",      CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,      CreatedBy: "403577698595",      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "snsa-0fb9d73747295d590",      ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      ServiceId: "svc-031836347e3ec9cc0",      ServiceName: "gargo-20-exv6tcuxxl-non-default",      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE"    }]}
I0729 12:22:03.731299   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  CreatedAt: 2023-07-29 12:05:30.766 +0000 UTC,
  CreatedBy: "403577698595",
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "snsa-0fb9d73747295d590",
  ServiceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  ServiceId: "svc-031836347e3ec9cc0",
  ServiceName: "gargo-20-exv6tcuxxl-non-default",
  ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",
  ServiceNetworkId: "sn-08c4f9a8bb41dcfda",
  ServiceNetworkName: "test-gateway",
  Status: "ACTIVE"
}] err <nil>
I0729 12:22:03.731394   15487 cloud.go:30] Request: VpcLattice/DeleteServiceNetworkServiceAssociation, Payload: {  ServiceNetworkServiceAssociationIdentifier: "snsa-0fb9d73747295d590"}
I0729 12:22:03.927557   15487 cloud.go:38] Response: VpcLattice/DeleteServiceNetworkServiceAssociation, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",  Id: "snsa-0fb9d73747295d590",  Status: "DELETE_IN_PROGRESS"}
I0729 12:22:03.927577   15487 service_manager.go:302] Disassociate service 0xc000857790 from service network 0xc0008578b0, resp {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkserviceassociation/snsa-0fb9d73747295d590",
  Id: "snsa-0fb9d73747295d590",
  Status: "DELETE_IN_PROGRESS"
}, err <nil>
I0729 12:22:03.927605   15487 service_manager.go:310] Disassociate-in-progress will retry later service 0xc000857790 from service network 0xc0008578b0
I0729 12:22:03.927611   15487 service_manager.go:209] Disassociation is not done yet for service &{{0xc000d41ac0 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc00064bbd0] [test-gateway]   true} <nil>}
I0729 12:22:03.927626   15487 httproute_controller.go:230] HTTPRouteReconciler: Failed deploy gargo-20-exv6tcuxxl due to err LATTICE_RETRY 
I0729 12:22:03.927655   15487 httproute_controller.go:133] Failed to cleanup HTTPRoute &{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5023129 2 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:03 +0000 UTC 0xc00012c840 map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc00064ba50 0xc00064ba60 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc00064ba70 [] [] <nil>}] [] [{{{0xc00064baa0 0xc00064bab0 crown-19-xp02eti5zc 0xc00064bac0 0xc00012c848} 0xc00012c84c} []} {{{0xc00064bad0 0xc00064bae0 crown-19-xp02eti5zc 0xc00064baf0 0xc00012c870} 0xc00012c874} []}]}]} {{[]}}} err LATTICE_RETRY
HandleReconcileError handle Error LATTICE_RETRY 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:22:03Z	DEBUG	events	retry reconcile...	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5023129"}, "reason": "Retry-Reconcile"}
2023-07-29T12:22:04Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "14e8f6d7-5b2c-40ac-9ff1-eb087d84b02a"}
2023-07-29T12:22:05Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "8afd3da4-58e3-42e3-a592-a0c613ea967b"}
2023-07-29T12:22:05Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "feb7863f-858d-44d8-afba-24bfc3e68afd"}
2023-07-29T12:22:05Z	INFO	PodReconcile	{"controller": "pod", "controllerGroup": "", "controllerKind": "Pod", "Pod": {"name":"snarl-18-6nas3pdvrz-5666756898-2w92c","namespace":"non-default"}, "namespace": "non-default", "name": "snarl-18-6nas3pdvrz-5666756898-2w92c", "reconcileID": "d9a73fc3-97cd-4977-8a24-46727ebc982e"}
2023-07-29T12:22:13Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "2d7875e4-bc2b-41d9-afcb-5f8306d09665"}
I0729 12:22:13.105381   15487 httproute_controller.go:196] Found aws-vpc-lattice for HTTPRoute for {{[{0xc00085a0f0 0xc00085a130 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc00085a170 [] [] <nil>}] [] [{{{0xc00085a1f0 0xc00085a200 crown-19-xp02eti5zc 0xc00085a230 0xc0005cb528} 0xc0005cb52c} []} {{{0xc00085a270 0xc00085a2b0 crown-19-xp02eti5zc 0xc00085a2d0 0xc0005cb530} 0xc0005cb534} []}]}]}
2023-07-29T12:22:13Z	INFO	Deleting	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "2d7875e4-bc2b-41d9-afcb-5f8306d09665"}
I0729 12:22:13.105446   15487 model_build_lattice_service.go:140] No custom-domain-name for httproute :gargo-20-exv6tcuxxl-non-default
I0729 12:22:13.105457   15487 model_build_targetgroup.go:235] buildTargetGroup: {[{0xc00085a170 [] [] <nil>}] [] [{{{0xc00085a1f0 0xc00085a200 crown-19-xp02eti5zc 0xc00085a230 0xc0005cb528} 0xc0005cb52c} []} {{{0xc00085a270 0xc00085a2b0 crown-19-xp02eti5zc 0xc00085a2d0 0xc0005cb530} 0xc0005cb534} []}]}
I0729 12:22:13.105467   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc00085a1f0 0xc00085a200 crown-19-xp02eti5zc 0xc00085a230 0xc0005cb528} 0xc0005cb52c} []} 
I0729 12:22:13.105474   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:22:13.105487   15487 model_build_targetgroup.go:339] Error finding backend service non-default/crown-19-xp02eti5zc error :Service "crown-19-xp02eti5zc" not found 
I0729 12:22:13.105495   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc0000b9b00]}]
I0729 12:22:13.105519   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:22:13.105527   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc0006aeb40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>} 
I0729 12:22:13.105544   15487 model_build_targetgroup.go:238] buildTargetGroup -- backendRef {{{0xc00085a270 0xc00085a2b0 crown-19-xp02eti5zc 0xc00085a2d0 0xc0005cb530} 0xc0005cb534} []} 
I0729 12:22:13.105549   15487 model_build_targetgroup.go:290] buildHTTPTargetGroupSpec,  kind Service
I0729 12:22:13.105556   15487 model_build_targetgroup.go:339] Error finding backend service non-default/crown-19-xp02eti5zc error :Service "crown-19-xp02eti5zc" not found 
I0729 12:22:13.105561   15487 latticestore.go:315] AddTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default]  isServiceImport[false] vpc[] arn[] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[{gargo-20-exv6tcuxxl non-default}:0xc0007d79a0] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[{gargo-20-exv6tcuxxl non-default 80 HTTP}:0xc0000b9b00]}]
2023-07-29T12:22:13Z	DEBUG	events	Deleting Reconcile	{"type": "Normal", "object": {"kind":"HTTPRoute","namespace":"non-default","name":"gargo-20-exv6tcuxxl","uid":"2dbce474-3983-4c86-b763-ab59efaa5b04","apiVersion":"gateway.networking.k8s.io/v1beta1","resourceVersion":"5023129"}, "reason": "Reconcile"}
I0729 12:22:13.105569   15487 latticestore.go:327] UpdateTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] vpc[] arn[]
I0729 12:22:13.105624   15487 model_build_targetgroup.go:268] buildTargetGroup, tg[k8s-crown-19-xp02eti5zc-non-default], tgSpec&{{0xc0006aeb40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>} 
I0729 12:22:13.105653   15487 model_build_lattice_service.go:87] latticeServiceModelBuildTask: for delete ignore Targets, policy &{{HTTPRoute gateway.networking.k8s.io/v1beta1} {gargo-20-exv6tcuxxl  non-default  2dbce474-3983-4c86-b763-ab59efaa5b04 5023129 2 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:03 +0000 UTC 0xc0005cb520 map[testing.kubernetes.io:true] map[] [] [httproute.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:parentRefs":{},"f:rules":{}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"httproute.k8s.aws/resources\"":{}}}} }]} {{[{0xc00085a0f0 0xc00085a130 <nil> test-gateway <nil> <nil>}]} [] [{[{0xc00085a170 [] [] <nil>}] [] [{{{0xc00085a1f0 0xc00085a200 crown-19-xp02eti5zc 0xc00085a230 0xc0005cb528} 0xc0005cb52c} []} {{{0xc00085a270 0xc00085a2b0 crown-19-xp02eti5zc 0xc00085a2d0 0xc0005cb530} 0xc0005cb534} []}]}]} {{[]}}}
2023-07-29T12:22:13Z	INFO	Successfully built model:	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "2d7875e4-bc2b-41d9-afcb-5f8306d09665", "{\"id\":\"non-default/gargo-20-exv6tcuxxl\",\"resources\":{\"AWS::VPCServiceNetwork::Service\":{\"gargo-20-exv6tcuxxl-non-default\":{\"spec\":{\"name\":\"gargo-20-exv6tcuxxl\",\"namespace\":\"non-default\",\"protocols\":[\"HTTP\"],\"servicenetworkhname\":[\"test-gateway\"],\"customerdomainname\":\"\",\"customercertarn\":\"\",\"IsDeleted\":true}}},\"AWS:VPCServiceNetwork::TargetGroup\":{\"k8s-crown-19-xp02eti5zc-non-default\":{\"spec\":{\"Name\":\"k8s-crown-19-xp02eti5zc-non-default\",\"config\":{\"port\":80,\"protocol\":\"HTTP\",\"protocolversion\":\"HTTP1\",\"vpcid\":\"vpc-0d3c74aaa93e650b1\",\"eksclustername\":\"\",\"serviceimport\":false,\"serviceexport\":false,\"k8sservice\":\"crown-19-xp02eti5zc\",\"k8sservicenamespace\":\"non-default\",\"k8shttproutename\":\"gargo-20-exv6tcuxxl\",\"k8shttproutenamespace\":\"non-default\"},\"Type\":\"IP\",\"IsDeleted\":true,\"LatticeID\":\"tg-04558f110adb72915\"}}}}}": ""}
I0729 12:22:13.105766   15487 target_group_synthesizer.go:367] SynthesizeTriggeredTargetGroupsCreation TargetGroups: [[0xc000dac000]]
I0729 12:22:13.105773   15487 target_group_synthesizer.go:370] In the SynthesizeTriggeredTargetGroupsCreation(), we only handle TG Creation request and skip any deletion request [&{{0xc0006aeb40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>}] 
I0729 12:22:13.105783   15487 target_group_synthesizer.go:402] Done -- SynthesizeTriggeredTargetGroupsCreation [0xc000dac000]
I0729 12:22:13.105790   15487 targets_synthesizer.go:35] Synthesize Targets: [] 
I0729 12:22:13.105796   15487 service_synthesizer.go:34] Service-synthesize start: [0xc000d1e4d0] 
I0729 12:22:13.105800   15487 service_synthesizer.go:39] Synthesize Service/HTTPRoute: &{{0xc0006aeb40 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc00085a530] [test-gateway]   true} <nil>}
I0729 12:22:13.105904   15487 cloud.go:30] Request: VpcLattice/ListServices, Payload: {}
I0729 12:22:13.158834   15487 cloud.go:38] Response: VpcLattice/ListServices, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",      CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      DnsEntry: {        DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-031836347e3ec9cc0",      LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,      Name: "gargo-20-exv6tcuxxl-non-default",      Status: "ACTIVE"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",      CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      DnsEntry: {        DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",        HostedZoneId: "Z09127221KTH2CFUOHIZH"      },      Id: "svc-07a0db708d74dfa8c",      LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,      Name: "nginx-workload-rt-locust",      Status: "ACTIVE"    }]}
I0729 12:22:13.158862   15487 service_manager.go:146] findServiceByName, resp [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  CreatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  DnsEntry: {
    DomainName: "gargo-20-exv6tcuxxl-non-default-031836347e3ec9cc0.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-031836347e3ec9cc0",
  LastUpdatedAt: 2023-07-29 12:05:10.164 +0000 UTC,
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "ACTIVE"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c",
  CreatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  DnsEntry: {
    DomainName: "nginx-workload-rt-locust-07a0db708d74dfa8c.7d67968.vpc-lattice-svcs.us-west-2.on.aws",
    HostedZoneId: "Z09127221KTH2CFUOHIZH"
  },
  Id: "svc-07a0db708d74dfa8c",
  LastUpdatedAt: 2023-07-04 05:16:59.043 +0000 UTC,
  Name: "nginx-workload-rt-locust",
  Status: "ACTIVE"
}], err: <nil>
I0729 12:22:13.158911   15487 service_manager.go:151] service gargo-20-exv6tcuxxl-non-default already exists with arn arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0
I0729 12:22:13.158917   15487 service_manager.go:225] Desire to associate svc svc-031836347e3ec9cc0 to  service network names []
I0729 12:22:13.158999   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkServiceAssociations, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:22:13.212001   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkServiceAssociations, Body: {  Items: []}
I0729 12:22:13.212015   15487 service_manager.go:280] ListServiceNetworkServiceAssociationsAsList req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
}, resp [] err <nil>
I0729 12:22:13.212098   15487 cloud.go:30] Request: VpcLattice/DeleteService, Payload: {  ServiceIdentifier: "svc-031836347e3ec9cc0"}
I0729 12:22:13.527748   15487 cloud.go:38] Response: VpcLattice/DeleteService, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",  Id: "svc-031836347e3ec9cc0",  Name: "gargo-20-exv6tcuxxl-non-default",  Status: "DELETE_IN_PROGRESS"}
I0729 12:22:13.527783   15487 service_manager.go:219] DeleteServiceWithContext >>>> req {
  ServiceIdentifier: "svc-031836347e3ec9cc0"
} resp {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-031836347e3ec9cc0",
  Id: "svc-031836347e3ec9cc0",
  Name: "gargo-20-exv6tcuxxl-non-default",
  Status: "DELETE_IN_PROGRESS"
}, err <nil>
I0729 12:22:13.527812   15487 service_synthesizer.go:45] service - Synthesizer: finish deleting service {{0xc0006aeb40 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc00085a530] [test-gateway]   true} <nil>}
I0729 12:22:13.527828   15487 latticestore.go:253] DelLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] 
I0729 12:22:13.527838   15487 service_synthesizer.go:51] service synthesize -- need to delete listeners [0xc000f273e0], err : <nil>
I0729 12:22:13.527844   15487 latticestore.go:518] DataStore: deleting listener {gargo-20-exv6tcuxxl non-default 80 HTTP} 
I0729 12:22:13.527857   15487 listener_synthesizer.go:37] Synthesize Listener:  []
I0729 12:22:13.527865   15487 listener_synthesizer.go:100] getSDKListeners service: [0xc000d1e4d0] err: <nil> 
I0729 12:22:13.527870   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[]}]
I0729 12:22:13.527884   15487 listener_synthesizer.go:105] getSDKRules: failed to find in store,  service: &{{0xc0006aeb40 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc00085a530] [test-gateway]   true} <nil>}, err: service does not exist in Data Store 
I0729 12:22:13.527903   15487 listener_synthesizer.go:57] getSDKlistener: [], err: getSDKRules: failed to find service in store
I0729 12:22:13.527909   15487 rule_synthesizer.go:32] Synthesize rule = [], err :<nil> 
I0729 12:22:13.527914   15487 rule_synthesizer.go:116] getSDKRules service: [0xc000d1e4d0] err: <nil> 
I0729 12:22:13.527919   15487 rule_synthesizer.go:120] getSDKRules, listener: [] err: <nil> 
 
I0729 12:22:13.527922   15487 rule_synthesizer.go:123] getSDKRules, rule [] err <nil> 
I0729 12:22:13.527930   15487 latticestore.go:275] GetLatticeService API, name[gargo-20-exv6tcuxxl] namespace[non-default] ds [&{{1 0} map[{test-gateway 403577698595}:0xc000a92c30] map[] map[{k8s-crown-19-xp02eti5zc-non-default gargo-20-exv6tcuxxl false}:0xc000b34100] map[]}]
I0729 12:22:13.527941   15487 rule_synthesizer.go:129] getSDKRules: failed to find service in store service &{{0xc0006aeb40 AWS::VPCServiceNetwork::Service gargo-20-exv6tcuxxl-non-default} {gargo-20-exv6tcuxxl non-default [0xc00085a530] [test-gateway]   true} <nil>}, err service does not exist in Data Store 
I0729 12:22:13.527949   15487 rule_synthesizer.go:53] rule>>> synthesize,  sdkRules :[] err: getSDKRules: failed to find service in store 
I0729 12:22:13.527956   15487 target_group_synthesizer.go:415] SynthesizeTriggeredTargetGroupsDeletion: TargetGroups ==[[0xc000dac000]]
I0729 12:22:13.527962   15487 target_group_manager.go:150] Manager: Deleting target group &{{0xc0006aeb40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>} 
I0729 12:22:13.527975   15487 target_group_manager.go:162] TG manager list, listReq {
  TargetGroupIdentifier: "tg-04558f110adb72915"
}
I0729 12:22:13.528076   15487 cloud.go:30] Request: VpcLattice/ListTargets, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:22:13.583355   15487 cloud.go:38] Response: VpcLattice/ListTargets, Body: {  Items: []}
I0729 12:22:13.583373   15487 target_group_manager.go:164] TG manager delete,  listResp [], err: <nil> 
I0729 12:22:13.583456   15487 cloud.go:30] Request: VpcLattice/DeleteTargetGroup, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:22:13.668311   15487 cloud.go:38] Response: VpcLattice/DeleteTargetGroup, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",  Id: "tg-04558f110adb72915",  Status: "DELETE_IN_PROGRESS"}
I0729 12:22:13.668329   15487 target_group_manager.go:221] TGManager delTGInput >>>> {
  TargetGroupIdentifier: "tg-04558f110adb72915"
} delTGResp :{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  Id: "tg-04558f110adb72915",
  Status: "DELETE_IN_PROGRESS"
}, err <nil> 
I0729 12:22:13.668360   15487 target_group_synthesizer.go:427] err := t.targetGroupManager.Delete(ctx, resTargetGroup) err: <nil>
I0729 12:22:13.668368   15487 target_group_synthesizer.go:429] Delete Target Group in SynthesizeTriggeredTargetGroupsDeletion: successfully deleted target group &{{0xc0006aeb40 AWS:VPCServiceNetwork::TargetGroup k8s-crown-19-xp02eti5zc-non-default} {k8s-crown-19-xp02eti5zc-non-default {80 HTTP HTTP1 vpc-0d3c74aaa93e650b1  false false crown-19-xp02eti5zc non-default gargo-20-exv6tcuxxl non-default} IP true tg-04558f110adb72915} <nil>}
I0729 12:22:13.668386   15487 latticestore.go:399] DelTargetGroup, name[k8s-crown-19-xp02eti5zc-non-default] isServiceImport[false]
I0729 12:22:13.668471   15487 cloud.go:30] Request: VpcLattice/ListTargetGroups, Payload: {}
I0729 12:22:13.724853   15487 cloud.go:38] Response: VpcLattice/ListTargetGroups, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",      CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,      Id: "tg-04558f110adb72915",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-29 12:22:13.645 +0000 UTC,      Name: "k8s-crown-19-xp02eti5zc-non-default",      Port: 80,      Protocol: "HTTP",      ServiceArns: [],      Status: "DELETE_IN_PROGRESS",      Type: "IP",      VpcIdentifier: "vpc-0d3c74aaa93e650b1"    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",      CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Id: "tg-0afe8abcd40f467b8",      IpAddressType: "IPV4",      LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,      Name: "k8s-nginx-node-locust",      Port: 80,      Protocol: "HTTP",      ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],      Status: "ACTIVE",      Type: "IP",      VpcIdentifier: "vpc-04c86859f0f6690b0"    }]}
I0729 12:22:13.724874   15487 target_group_manager.go:236] ManagerList: [{
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",
  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,
  Id: "tg-04558f110adb72915",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-29 12:22:13.645 +0000 UTC,
  Name: "k8s-crown-19-xp02eti5zc-non-default",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: [],
  Status: "DELETE_IN_PROGRESS",
  Type: "IP",
  VpcIdentifier: "vpc-0d3c74aaa93e650b1"
} {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",
  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Id: "tg-0afe8abcd40f467b8",
  IpAddressType: "IPV4",
  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,
  Name: "k8s-nginx-node-locust",
  Port: 80,
  Protocol: "HTTP",
  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],
  Status: "ACTIVE",
  Type: "IP",
  VpcIdentifier: "vpc-04c86859f0f6690b0"
}], err: <nil> 
I0729 12:22:13.725001   15487 cloud.go:30] Request: VpcLattice/GetTargetGroup, Payload: {  TargetGroupIdentifier: "tg-04558f110adb72915"}
I0729 12:22:13.783116   15487 cloud.go:38] Response: VpcLattice/GetTargetGroup, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915",  Config: {    HealthCheck: {      Enabled: true,      HealthCheckIntervalSeconds: 30,      HealthCheckTimeoutSeconds: 5,      HealthyThresholdCount: 5,      Matcher: {        HttpCode: "200"      },      Path: "/",      Protocol: "HTTP",      ProtocolVersion: "HTTP1",      UnhealthyThresholdCount: 2    },    IpAddressType: "IPV4",    Port: 80,    Protocol: "HTTP",    ProtocolVersion: "HTTP1",    VpcIdentifier: "vpc-0d3c74aaa93e650b1"  },  CreatedAt: 2023-07-29 12:04:29.163 +0000 UTC,  Id: "tg-04558f110adb72915",  LastUpdatedAt: 2023-07-29 12:22:13.645 +0000 UTC,  Name: "k8s-crown-19-xp02eti5zc-non-default",  ServiceArns: [],  Status: "DELETE_IN_PROGRESS",  Type: "IP"}
I0729 12:22:13.783206   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915"}
E0729 12:22:13.865796   15487 request.go:539] Failed request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915"}, Error: BadRequestException: Invalid input resource arn
	status code: 400, request id: aff823cb-16b7-4438-8b93-3d646a03ac9b
I0729 12:22:13.865816   15487 target_group_manager.go:263] tagsOutput {

},  err: BadRequestException: Invalid input resource arn
	status code: 400, request id: aff823cb-16b7-4438-8b93-3d646a03ac9b
I0729 12:22:13.865913   15487 cloud.go:30] Request: VpcLattice/GetTargetGroup, Payload: {  TargetGroupIdentifier: "tg-0afe8abcd40f467b8"}
I0729 12:22:13.908950   15487 cloud.go:38] Response: VpcLattice/GetTargetGroup, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-0afe8abcd40f467b8",  Config: {    HealthCheck: {      Enabled: true,      HealthCheckIntervalSeconds: 30,      HealthCheckTimeoutSeconds: 5,      HealthyThresholdCount: 5,      Matcher: {        HttpCode: "200"      },      Path: "/",      Protocol: "HTTP",      ProtocolVersion: "HTTP1",      UnhealthyThresholdCount: 2    },    IpAddressType: "IPV4",    Port: 80,    Protocol: "HTTP",    ProtocolVersion: "HTTP1",    VpcIdentifier: "vpc-04c86859f0f6690b0"  },  CreatedAt: 2023-07-04 04:40:30.687 +0000 UTC,  Id: "tg-0afe8abcd40f467b8",  LastUpdatedAt: 2023-07-04 04:40:30.687 +0000 UTC,  Name: "k8s-nginx-node-locust",  ServiceArns: ["arn:aws:vpc-lattice:us-west-2:403577698595:service/svc-07a0db708d74dfa8c"],  Status: "ACTIVE",  Type: "IP"}
I0729 12:22:13.908980   15487 target_group_synthesizer.go:173] SynthesizeSDKTargetGroups: here is sdkTGs [{{{} 0xc00085bb50 0xc000ac5950 0xc000658948 <nil> <nil> 0xc00085bd50 0xc000658960 0xc00085bda0 [] 0xc00085bde0 0xc00085be00} <nil>}] len 1 
I0729 12:22:13.908994   15487 target_group_synthesizer.go:188] Ignore target group not tagged for K8S, arn:aws:vpc-lattice:us-west-2:403577698595:targetgroup/tg-04558f110adb72915, k8s-crown-19-xp02eti5zc-non-default 
I0729 12:22:13.909001   15487 target_group_synthesizer.go:311] SynthesizeSDKTargetGroups, here is the stale target groups list [] stalelen 0
2023-07-29T12:22:13Z	INFO	Successfully deployed model	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "2d7875e4-bc2b-41d9-afcb-5f8306d09665"}
I0729 12:22:13.909205   15487 gateway_controller.go:368] Before update, the snapshot of listeners  [{http [{0xc000d6a750 HTTPRoute}] 1 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc000d6a760 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}] 
I0729 12:22:13.909301   15487 gateway_controller.go:491] After update, the snapshot of listener status [{http [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]
2023-07-29T12:22:13Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "b4630274-04e4-4e08-bcbb-c366604d7132"}
2023-07-29T12:22:13Z	INFO	reconcile gateway resource	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "b4630274-04e4-4e08-bcbb-c366604d7132"}
I0729 12:22:13.924106   15487 gateway.go:46] Gateway Update 
I0729 12:22:13.924171   15487 gateway_controller.go:368] Before update, the snapshot of listeners  [{http [{0xc00083acd0 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc00083ad10 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}] 
I0729 12:22:13.924317   15487 gateway_controller.go:491] After update, the snapshot of listener status [{http [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{<nil> HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]
I0729 12:22:13.936252   15487 httproute.go:57] TODO HTTPRoute Delete 
2023-07-29T12:22:13Z	INFO	HTTPRouteReconciler	{"controller": "httproute", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "HTTPRoute", "HTTPRoute": {"name":"gargo-20-exv6tcuxxl","namespace":"non-default"}, "namespace": "non-default", "name": "gargo-20-exv6tcuxxl", "reconcileID": "005bdce4-bff0-4ed7-901c-b4e839350b01"}
2023-07-29T12:22:13Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "b4630274-04e4-4e08-bcbb-c366604d7132", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":false}}}}}": ""}
I0729 12:22:13.943486   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:22:13.943492   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc000efa1c0] 
I0729 12:22:13.943499   15487 service_network_synthesizer.go:98] Synthersing Gateway: Add test-gateway
I0729 12:22:13.943571   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:14.028693   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:14.028717   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:22:14.028812   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:22:14.098695   15487 gateway.go:46] Gateway Update 
I0729 12:22:14.114266   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:22:14.114283   15487 service_network_manager.go:90] service_network[&{{0xc0004ed600 AWS::VPCServiceNetwork::ServiceNetwork ServiceNetwork} {test-gateway non-default 403577698595 true false} <nil>}] exists, further check association
I0729 12:22:14.114376   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:22:14.160306   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",      CreatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-0e442775f83c0b5f4",      LastUpdatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE",      VpcId: "vpc-0d3c74aaa93e650b1"    }]}
I0729 12:22:14.160323   15487 service_network_manager.go:308] Mesh and Vpc association is active.
I0729 12:22:14.160330   15487 service_network_synthesizer.go:110] Synthersizing Gateway succeeded for gateway test-gateway, status {arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda} 
I0729 12:22:14.160337   15487 latticestore.go:169] AddServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda], id[sn-08c4f9a8bb41dcfda]
I0729 12:22:14.160343   15487 latticestore.go:175] UpdateServiceNetwork name:[test-gateway], account[403577698595] arn[arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda] id[sn-08c4f9a8bb41dcfda]
I0729 12:22:14.160415   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:14.220226   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:14.220251   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [test-gateway locust-gateway] 
I0729 12:22:14.220257   15487 service_network_synthesizer.go:130] SDK List: [test-gateway locust-gateway] 
I0729 12:22:14.220287   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork test-gateway needed to be deleted 
I0729 12:22:14.220292   15487 service_network_synthesizer.go:164] Skip deleting sdkServiceNetwork test-gateway since some gateway(s) still reference it
I0729 12:22:14.220296   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:22:14.220300   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:22:14.220357   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:14.277361   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:14.277377   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:22:14.277446   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:22:14.328434   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:22:14.328506   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:22:14.377618   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:22:14.377637   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:22:14.377644   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:22:14.377649   15487 service_network_synthesizer.go:50] Finish synthesizing ServiceNetworks/Gateways ...  
2023-07-29T12:22:14Z	INFO	Successfully deployed model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "b4630274-04e4-4e08-bcbb-c366604d7132"}
I0729 12:22:14.377684   15487 gateway_controller.go:241] serviceNetworkStatus : {{test-gateway 403577698595} arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda sn-08c4f9a8bb41dcfda service network is created and associated} for test-gateway  error <nil> 
2023-07-29T12:22:14Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "9faec424-abf8-4558-9e6f-71ba74d7103a"}
I0729 12:22:14.389435   15487 gateway_controller.go:140] Checking if gateway can be deleted test-gateway
2023-07-29T12:22:14Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "9faec424-abf8-4558-9e6f-71ba74d7103a", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":true}}}}}": ""}
I0729 12:22:14.389475   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:22:14.389480   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc0008e4f50] 
I0729 12:22:14.389486   15487 service_network_synthesizer.go:66] Synthersing Gateway: Del test-gateway
I0729 12:22:14.389551   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:14.447325   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:14.447343   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:22:14.447413   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:22:14.510969   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:22:14.511046   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:22:14.561422   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",      CreatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-0e442775f83c0b5f4",      LastUpdatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "ACTIVE",      VpcId: "vpc-0d3c74aaa93e650b1"    }]}
I0729 12:22:14.561437   15487 service_network_manager.go:308] Mesh and Vpc association is active.
I0729 12:22:14.561444   15487 service_network_manager.go:198] DeleteServiceNetworkVpcAssociationInput >>>> {
  ServiceNetworkVpcAssociationIdentifier: "snva-0e442775f83c0b5f4"
}
I0729 12:22:14.561517   15487 cloud.go:30] Request: VpcLattice/DeleteServiceNetworkVpcAssociation, Payload: {  ServiceNetworkVpcAssociationIdentifier: "snva-0e442775f83c0b5f4"}
I0729 12:22:14.661960   15487 cloud.go:38] Response: VpcLattice/DeleteServiceNetworkVpcAssociation, Body: {  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",  Id: "snva-0e442775f83c0b5f4",  Status: "DELETE_IN_PROGRESS"}
I0729 12:22:14.661981   15487 service_network_manager.go:200] DeleteServiceNetworkVPCAssociationResp: service_network test-gateway , resp {
  Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",
  Id: "snva-0e442775f83c0b5f4",
  Status: "DELETE_IN_PROGRESS"
}, err <nil> 
I0729 12:22:14.662056   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:14.728487   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:14.728502   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [test-gateway locust-gateway] 
I0729 12:22:14.728509   15487 service_network_synthesizer.go:130] SDK List: [test-gateway locust-gateway] 
I0729 12:22:14.728538   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork test-gateway needed to be deleted 
I0729 12:22:14.728543   15487 service_network_synthesizer.go:164] Skip deleting sdkServiceNetwork test-gateway since some gateway(s) still reference it
I0729 12:22:14.728547   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:22:14.728551   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:22:14.728604   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:14.797879   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:14.797894   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:22:14.797964   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:22:14.860392   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:22:14.860481   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:22:14.925098   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:22:14.925116   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:22:14.925123   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:22:14.925188   15487 gateway_controller.go:174] Failed to cleanup gw &{{Gateway gateway.networking.k8s.io/v1beta1} {test-gateway  non-default  04efa509-a63a-4c8f-8145-3191130e1a1b 5023166 2 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:14 +0000 UTC 0xc0012e7c50 map[testing.kubernetes.io:true] map[application-networking.k8s.aws/lattice-vpc-association:true] [] [gateway.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:application-networking.k8s.aws/lattice-vpc-association":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:gatewayClassName":{},"f:listeners":{".":{},"k:{\"name\":\"http\"}":{".":{},"f:allowedRoutes":{".":{},"f:namespaces":{".":{},"f:from":{}}},"f:name":{},"f:port":{},"f:protocol":{}},"k:{\"name\":\"https\"}":{".":{},"f:allowedRoutes":{".":{},"f:namespaces":{".":{},"f:from":{}}},"f:name":{},"f:port":{},"f:protocol":{}}}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"gateway.k8s.aws/resources\"":{}}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:22:13 +0000 UTC FieldsV1 {"f:status":{"f:conditions":{"k:{\"type\":\"Accepted\"}":{"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{}},"k:{\"type\":\"Programmed\"}":{".":{},"f:lastTransitionTime":{},"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:listeners":{".":{},"k:{\"name\":\"http\"}":{".":{},"f:attachedRoutes":{},"f:conditions":{".":{},"k:{\"type\":\"Accepted\"}":{".":{},"f:lastTransitionTime":{},"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:name":{},"f:supportedKinds":{}},"k:{\"name\":\"https\"}":{".":{},"f:attachedRoutes":{},"f:conditions":{".":{},"k:{\"type\":\"Accepted\"}":{".":{},"f:lastTransitionTime":{},"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:name":{},"f:supportedKinds":{}}}}} status}]} {amazon-vpc-lattice [{http <nil> 80 HTTP <nil> 0xc0006c6940} {https <nil> 443 HTTPS <nil> 0xc0006c6960}] []} {[] [{Accepted True 1 1970-01-01 00:00:00 +0000 UTC Accepted application-networking.k8s.aws/gateway-api-controller} {Programmed True 1 2023-07-29 12:05:13 +0000 UTC Programmed aws-gateway-arn: arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda}] [{http [{0xc0009a7960 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc0009a7970 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]}}, err LATTICE_RETRY 
HandleReconcileError handle Error LATTICE_RETRY 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:22:34Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "240438d8-5835-4a46-9175-7249d76877e0"}
I0729 12:22:34.926159   15487 gateway_controller.go:140] Checking if gateway can be deleted test-gateway
2023-07-29T12:22:34Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "240438d8-5835-4a46-9175-7249d76877e0", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":true}}}}}": ""}
I0729 12:22:34.926233   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:22:34.926240   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc0006147e0] 
I0729 12:22:34.926248   15487 service_network_synthesizer.go:66] Synthersing Gateway: Del test-gateway
I0729 12:22:34.926361   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:34.987127   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:34.987148   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:22:34.987230   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:22:35.048215   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:22:35.048302   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:22:35.097878   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-0e442775f83c0b5f4",      CreatedAt: 2023-07-29 12:04:29.322 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-0e442775f83c0b5f4",      LastUpdatedAt: 2023-07-29 12:22:14.644 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      ServiceNetworkId: "sn-08c4f9a8bb41dcfda",      ServiceNetworkName: "test-gateway",      Status: "DELETE_IN_PROGRESS",      VpcId: "vpc-0d3c74aaa93e650b1"    }]}
I0729 12:22:35.097898   15487 service_network_manager.go:317] ServiceNetwork and Vpc association is being deleted, please retry later
I0729 12:22:35.097965   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:35.163192   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 1    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:35.163220   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [test-gateway locust-gateway] 
I0729 12:22:35.163228   15487 service_network_synthesizer.go:130] SDK List: [test-gateway locust-gateway] 
I0729 12:22:35.163260   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork test-gateway needed to be deleted 
I0729 12:22:35.163266   15487 service_network_synthesizer.go:164] Skip deleting sdkServiceNetwork test-gateway since some gateway(s) still reference it
I0729 12:22:35.163270   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:22:35.163274   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:22:35.163336   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:35.223578   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 0    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:35.223597   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:22:35.223672   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:22:35.312004   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:22:35.312089   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:22:35.366006   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:22:35.366029   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:22:35.366036   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:22:35.366098   15487 gateway_controller.go:174] Failed to cleanup gw &{{Gateway gateway.networking.k8s.io/v1beta1} {test-gateway  non-default  04efa509-a63a-4c8f-8145-3191130e1a1b 5023166 2 2023-07-29 12:04:28 +0000 UTC 2023-07-29 12:22:14 +0000 UTC 0xc000e9aaf8 map[testing.kubernetes.io:true] map[application-networking.k8s.aws/lattice-vpc-association:true] [] [gateway.k8s.aws/resources] [{integration.test Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:annotations":{".":{},"f:application-networking.k8s.aws/lattice-vpc-association":{}},"f:labels":{".":{},"f:testing.kubernetes.io":{}}},"f:spec":{".":{},"f:gatewayClassName":{},"f:listeners":{".":{},"k:{\"name\":\"http\"}":{".":{},"f:allowedRoutes":{".":{},"f:namespaces":{".":{},"f:from":{}}},"f:name":{},"f:port":{},"f:protocol":{}},"k:{\"name\":\"https\"}":{".":{},"f:allowedRoutes":{".":{},"f:namespaces":{".":{},"f:from":{}}},"f:name":{},"f:port":{},"f:protocol":{}}}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:04:28 +0000 UTC FieldsV1 {"f:metadata":{"f:finalizers":{".":{},"v:\"gateway.k8s.aws/resources\"":{}}}} } {main Update gateway.networking.k8s.io/v1beta1 2023-07-29 12:22:13 +0000 UTC FieldsV1 {"f:status":{"f:conditions":{"k:{\"type\":\"Accepted\"}":{"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{}},"k:{\"type\":\"Programmed\"}":{".":{},"f:lastTransitionTime":{},"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:listeners":{".":{},"k:{\"name\":\"http\"}":{".":{},"f:attachedRoutes":{},"f:conditions":{".":{},"k:{\"type\":\"Accepted\"}":{".":{},"f:lastTransitionTime":{},"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:name":{},"f:supportedKinds":{}},"k:{\"name\":\"https\"}":{".":{},"f:attachedRoutes":{},"f:conditions":{".":{},"k:{\"type\":\"Accepted\"}":{".":{},"f:lastTransitionTime":{},"f:message":{},"f:observedGeneration":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:name":{},"f:supportedKinds":{}}}}} status}]} {amazon-vpc-lattice [{http <nil> 80 HTTP <nil> 0xc0007d4d00} {https <nil> 443 HTTPS <nil> 0xc0007d4d20}] []} {[] [{Accepted True 1 1970-01-01 00:00:00 +0000 UTC Accepted application-networking.k8s.aws/gateway-api-controller} {Programmed True 1 2023-07-29 12:05:13 +0000 UTC Programmed aws-gateway-arn: arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda}] [{http [{0xc000a1e720 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]} {https [{0xc000a1e730 HTTPRoute}] 0 [{Accepted True 1 2023-07-29 12:05:13 +0000 UTC Accepted }]}]}}, err LATTICE_RETRY 
HandleReconcileError handle Error LATTICE_RETRY 
>>>>>> Retrying Reconcile after 20 seconds ...
2023-07-29T12:22:55Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "87286b4a-7ef5-4bdd-af22-9a60cf95c054"}
I0729 12:22:55.366324   15487 gateway_controller.go:140] Checking if gateway can be deleted test-gateway
2023-07-29T12:22:55Z	INFO	Successfully built model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "87286b4a-7ef5-4bdd-af22-9a60cf95c054", "{\"id\":\"non-default/test-gateway\",\"resources\":{\"AWS::VPCServiceNetwork::ServiceNetwork\":{\"ServiceNetwork\":{\"spec\":{\"name\":\"test-gateway\",\"namespace\":\"non-default\",\"account\":\"403577698595\",\"AssociateToVPC\":true,\"IsDeleted\":true}}}}}": ""}
I0729 12:22:55.366375   15487 service_network_synthesizer.go:35] Start synthesizing ServiceNetworks/Gateways ...  
I0729 12:22:55.366385   15487 service_network_synthesizer.go:61] Start synthesizing Triggered ServiceNetworks/Gateways ...[0xc000614bd0] 
I0729 12:22:55.366393   15487 service_network_synthesizer.go:66] Synthersing Gateway: Del test-gateway
I0729 12:22:55.366500   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:55.418094   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda",      CreatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Id: "sn-08c4f9a8bb41dcfda",      LastUpdatedAt: 2023-07-29 12:04:29.026 +0000 UTC,      Name: "test-gateway",      NumberOfAssociatedServices: 0,      NumberOfAssociatedVPCs: 0    },{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:55.418125   15487 service_network_manager.go:259] Found ServiceNetwork named  test-gateway
I0729 12:22:55.418217   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-08c4f9a8bb41dcfda"}
I0729 12:22:55.478454   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-0d3c74aaa93e650b1"  }}
I0729 12:22:55.478535   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:22:55.532643   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: []}
I0729 12:22:55.532664   15487 service_network_manager.go:235] DeleteServiceNetworkWithContext: service_network test-gateway
I0729 12:22:55.532740   15487 cloud.go:30] Request: VpcLattice/DeleteServiceNetwork, Payload: {  ServiceNetworkIdentifier: "sn-08c4f9a8bb41dcfda"}
I0729 12:22:55.687275   15487 cloud.go:38] Response: VpcLattice/DeleteServiceNetwork, Body: {}
I0729 12:22:55.687294   15487 service_network_manager.go:237] DeleteServiceNetworkWithContext: service_network test-gateway , resp {

}, err <nil> 
I0729 12:22:55.687302   15487 service_network_manager.go:242] Successfully delete service_network test-gateway
I0729 12:22:55.687309   15487 service_network_synthesizer.go:92] Synthersing Gateway: successfully deleted gateway test-gateway
I0729 12:22:55.687317   15487 latticestore.go:192] DelServiceNetwork name:[test-gateway], account[403577698595] 
I0729 12:22:55.687388   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:55.751086   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:55.751100   15487 service_network_manager.go:169] defaultServiceNetworkManager: List return [locust-gateway] 
I0729 12:22:55.751107   15487 service_network_synthesizer.go:130] SDK List: [locust-gateway] 
I0729 12:22:55.751135   15487 service_network_synthesizer.go:138] Synthersizing Gateway: checking if sdkServiceNetwork locust-gateway needed to be deleted 
I0729 12:22:55.751140   15487 service_network_synthesizer.go:156] Synthesizing Gateway: Delete stale sdkServiceNetwork locust-gateway
I0729 12:22:55.751198   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworks, Payload: {}
I0729 12:22:55.807567   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworks, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      CreatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Id: "sn-0948b6c602a526d98",      LastUpdatedAt: 2023-07-04 05:16:58.686 +0000 UTC,      Name: "locust-gateway",      NumberOfAssociatedServices: 1,      NumberOfAssociatedVPCs: 1    }]}
I0729 12:22:55.807585   15487 service_network_manager.go:259] Found ServiceNetwork named  locust-gateway
I0729 12:22:55.807655   15487 cloud.go:30] Request: VpcLattice/ListTagsForResource, Payload: {  ResourceArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98"}
I0729 12:22:55.859744   15487 cloud.go:38] Response: VpcLattice/ListTagsForResource, Body: {  Tags: {    K8SServiceNetworkOwnedByVPC: "vpc-01d220c66e24fe93b"  }}
I0729 12:22:55.859830   15487 cloud.go:30] Request: VpcLattice/ListServiceNetworkVpcAssociations, Payload: {  ServiceNetworkIdentifier: "sn-0948b6c602a526d98"}
I0729 12:22:55.922200   15487 cloud.go:38] Response: VpcLattice/ListServiceNetworkVpcAssociations, Body: {  Items: [{      Arn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetworkvpcassociation/snva-077c66ea311dce52a",      CreatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      CreatedBy: "403577698595",      Id: "snva-077c66ea311dce52a",      LastUpdatedAt: 2023-07-04 05:16:58.964 +0000 UTC,      ServiceNetworkArn: "arn:aws:vpc-lattice:us-west-2:403577698595:servicenetwork/sn-0948b6c602a526d98",      ServiceNetworkId: "sn-0948b6c602a526d98",      ServiceNetworkName: "locust-gateway",      Status: "ACTIVE",      VpcId: "vpc-01d220c66e24fe93b"    }]}
I0729 12:22:55.922228   15487 service_network_manager.go:218] Skip deleting, the service network[locust-gateway] is created by VPC vpc-01d220c66e24fe93b
I0729 12:22:55.922234   15487 service_network_manager.go:246] Deleting service_network (locust-gateway) Skipped, since it is owned by different VPC 
I0729 12:22:55.922239   15487 service_network_synthesizer.go:50] Finish synthesizing ServiceNetworks/Gateways ...  
2023-07-29T12:22:55Z	INFO	Successfully deployed model	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "87286b4a-7ef5-4bdd-af22-9a60cf95c054"}
2023-07-29T12:22:55Z	INFO	Successfully removed finalizer	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "87286b4a-7ef5-4bdd-af22-9a60cf95c054"}
TODO Gatway Delete2023-07-29T12:22:55Z	INFO	GatewayReconciler	{"controller": "gateway", "controllerGroup": "gateway.networking.k8s.io", "controllerKind": "Gateway", "Gateway": {"name":"test-gateway","namespace":"non-default"}, "namespace": "non-default", "name": "test-gateway", "reconcileID": "f7c02235-a811-4520-918e-f6e2db588a50"}
